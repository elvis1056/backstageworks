(this.webpackJsonpbackstageworks=this.webpackJsonpbackstageworks||[]).push([[15],{345:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return I}));var a=n(16),c=n(121),r=n(0),o=n.n(r),i=n(761),s=n(936),l=n(1),d=["children","classNameProps"],u=Object(i.a)((function(e){return{root:{backgroundColor:e.palette.customColor.themePrimary,fontSize:"14px",padding:"8px 10px",maxHeight:40,"&:hover":{backgroundColor:e.palette.customColor.themePrimaryHover},"&.Mui-disabled":{background:e.palette.customColor.themeDisablePrimaryBackground,color:e.palette.customColor.themeDisablePrimaryColor}},text:{color:e.palette.customColor.white}}})),b=function(e){var t=e.children,n=e.classNameProps,r=void 0===n?"":n,o=Object(c.a)(e,d),i=u();return Object(l.jsx)(s.a,Object(a.a)(Object(a.a)({className:"".concat(i.root," ").concat(i.text," ").concat(r)},o),{},{children:t}))},j=["children","classNameProps"],m=Object(i.a)((function(e){return{btnRootClass:{backgroundColor:e.palette.customColor.white,border:"1px solid ".concat(e.palette.customColor.themeDefaultBorderColor),fontSize:"14px",fontWeight:"normal",padding:"7px 10px",color:e.palette.text.black,maxHeight:40,boxShadow:"none","&:focus":{backgroundColor:e.palette.customColor.themeDefaultBackgroundFocus},"&:hover":{backgroundColor:e.palette.customColor.themeDefaultBackgroundHover}}}})),p=function(e){var t=e.children,n=e.classNameProps,r=void 0===n?"":n,o=Object(c.a)(e,j),i=m();return Object(l.jsx)(s.a,Object(a.a)(Object(a.a)({className:"".concat(i.btnRootClass," ").concat(r)},o),{},{children:t}))},_=n(328),O=["children"],f=Object(i.a)((function(){return{root:{cursor:"pointer","&:hover":{transform:"scale(1.25,1.25)",transition:"transform 0.25s ease"}}}})),h=function(e){var t=e.children,n=Object(c.a)(e,O),r=f();return Object(l.jsx)(_.a,Object(a.a)(Object(a.a)({className:r.root,color:"primary"},n),{},{children:t}))},x=n(10),g=n(937),v=n(434),y=n.n(v),k=n(939),w=n(285),N=n(286),S=n(938),C=n(335),M=n(289),R=["text","onClick","startIcon","options","ButtonGroupProps","classNameObj"],B=Object(i.a)((function(e){return{btnGroupRoot:{minHeight:40,maxHeight:40},btnRootClass:{backgroundColor:e.palette.customColor.white,fontSize:"14px",border:"1px solid ".concat(e.palette.customColor.themeDefaultBorderColor),boxShadow:"none","&:focus":{backgroundColor:e.palette.customColor.btnFocusColor},"&:hover":{backgroundColor:e.palette.customColor.themeDefaultBackgroundHover}},btnLabel:{"& > .MuiButton-label":{fontSize:"14px"}},btnRootRightClass:{borderLeft:"none"},menuPaper:{width:180},menuItem:{width:"100%",display:"flex",alignContent:"center",padding:"4px 24px"},menuIcon:{marginRight:20,display:"flex",justifyContent:"center",alignContent:"center","& .MuiIcon-root":{marginRight:0}}}})),I=function(e){var t=e.text,n=e.onClick,r=e.startIcon,i=e.options,d=e.ButtonGroupProps,u=e.classNameObj,b=Object(c.a)(e,R),j=o.a.useState(!1),m=Object(x.a)(j,2),p=m[0],_=m[1],O=o.a.useRef(null),f=function(e){O.current&&O.current.contains(e.target)||_(!1)},h=B();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)(g.a,Object(a.a)(Object(a.a)({"aria-label":"split button",className:"".concat(h.btnGroupRoot," ").concat(null===u||void 0===u?void 0:u.btnGroup),disableElevation:!0,ref:O,variant:"contained"},d),{},{children:[Object(l.jsx)(s.a,Object(a.a)(Object(a.a)({className:"".concat(h.btnRootClass," ").concat(h.btnLabel," ").concat(null===u||void 0===u?void 0:u.left),onClick:n,startIcon:r},b),{},{children:t})),Object(l.jsx)(s.a,{"aria-controls":p?"split-button-menu":void 0,"aria-expanded":p?"true":void 0,"aria-haspopup":"menu",className:"".concat(h.btnRootClass," ").concat(h.btnRootRightClass," ").concat(null===u||void 0===u?void 0:u.right),disabled:0===i.length,onClick:function(){_((function(e){return!e}))},size:"small",children:Object(l.jsx)(y.a,{})})]})),Object(l.jsx)(S.a,{anchorEl:O.current,className:"".concat(null===u||void 0===u?void 0:u.popper),open:p,role:void 0,style:{zIndex:2},transition:!0,children:function(e){var t=e.TransitionProps,n=e.placement;return Object(l.jsx)(w.a,Object(a.a)(Object(a.a)({},t),{},{style:{transformOrigin:"bottom"===n?"center top":"center bottom"},children:Object(l.jsx)(N.a,{className:"".concat(h.menuPaper," ").concat(null===u||void 0===u?void 0:u.menuPaper),children:Object(l.jsx)(k.a,{onClickAway:f,children:Object(l.jsx)(M.a,{children:i.map((function(e){return Object(l.jsxs)(C.a,Object(a.a)(Object(a.a)({className:h.menuItem,onClick:function(){e.handleItemclick&&e.handleItemclick(),_(!1)}},e),{},{children:[Object(l.jsx)("div",{className:h.menuIcon,children:e.icon}),Object(l.jsx)("div",{className:h.menuLabel,children:e.label})]}),e.id)}))})})})}))}})]})}},353:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(121),c=n(16),r=(n(0),n(287)),o=n(763),i=n(328),s=n(451),l=n.n(s),d=n(761),u=n(358),b=n(1),j=["children","isOpen","onClose","title","subTitle","isCloseIcon","modalWidth","classesNameObj"],m=Object(d.a)((function(e){return Object(c.a)(Object(c.a)({},Object(u.a)(e)),{},{paper:{position:"absolute",backgroundColor:e.palette.background.paper,borderRadius:"4px",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},modalTitleBlock:{padding:"5px 0"},modalTitle:{color:"black",fontSize:"18px",fontWeight:"bold"},subTitle:{}})})),p=function(e){var t=e.children,n=e.isOpen,s=e.onClose,d=e.title,u=e.subTitle,p=e.isCloseIcon,_=void 0!==p&&p,O=e.modalWidth,f=e.classesNameObj,h=Object(a.a)(e,j),x=m();return Object(b.jsx)(r.a,{className:"".concat(x.flex_center," ").concat(x.modal," ").concat(null===f||void 0===f?void 0:f.modal),onClose:s,open:n,children:Object(b.jsx)("div",Object(c.a)(Object(c.a)({className:"".concat(x.paper," ").concat(null===f||void 0===f?void 0:f.modalContainer),style:O?{width:O}:{}},h),{},{children:Object(b.jsxs)(o.a,{alignItems:"stretch",container:!0,direction:"column",justify:"center",children:[Object(b.jsx)(o.a,{item:!0,children:Object(b.jsxs)("div",{className:"\n                ".concat(_?"".concat(x.flex_align_center," ").concat(x.justify_between):"","\n                ").concat(x.modalTitleBlock,"\n                ").concat(null===f||void 0===f?void 0:f.modalGridContainer,"\n              "),children:[Object(b.jsx)("div",{className:"".concat(x.modalTitle," ").concat(null===f||void 0===f?void 0:f.modalTitle),children:d}),_&&Object(b.jsx)(i.a,{"aria-label":"close",onClick:s,children:Object(b.jsx)(l.a,{})})]})}),u&&Object(b.jsx)(o.a,{item:!0,children:Object(b.jsx)("div",{className:"".concat(x.subTitle," ").concat(null===f||void 0===f?void 0:f.modalSubTitle),children:u})}),t]})}))})};t.b=p},358:function(e,t,n){"use strict";var a=n(84);t.a=function(e){var t=e.bp.largeAlpha;return{w_full:{width:"100%"},w_screen:{width:"100vw"},w_auto:{width:"auto"},h_full:{height:"100%"},h_screen:{height:"100vw"},h_auto:{height:"auto"},h_30:{height:30},col_3:{width:"auto",maxWidth:"25%",minWidth:"calc((100% / 12) * 3)"},col_4:{width:"auto",maxWidth:"33.3333%",minWidth:"calc((100% / 12) * 4)"},col_6:{width:"auto",maxWidth:"50%",minWidth:"calc((100% / 12) * 6)"},"largeAlpha:col_6":Object(a.a)({},e.breakpoints.down(t),{width:"auto",maxWidth:"50%"}),"largeAlpha:col_12":Object(a.a)({},e.breakpoints.down(t),{width:"auto",maxWidth:"100%"}),w_ctrl90:{width:90,flex:"0 0 90px"},w_ctrl_left90:{width:"auto",flex:"1 1 auto"},d_flex:{display:"flex !important"},d_inflex:{display:"inline-flex !important"},d_block:{display:"block !important"},d_inblock:{display:"inline-block !important"},d_none:{display:"none !important"},flex_left:{marginRight:"auto"},flex_right:{color:"inherit"},flex_justify_start:{display:"flex",justifyContent:"flex-start"},flex_justify_between:{display:"flex",justifyContent:"between"},flex_justify_center:{display:"flex",justifyContent:"center"},flex_justify_end:{display:"flex",justifyContent:"flex-end"},flex_align_start:{display:"flex",alignItems:"start"},flex_align_center:{display:"flex",alignItems:"center"},flex_center:{display:"flex",justifyContent:"center",alignItems:"center"},justify_around:{justifyContent:"space-around"},justify_between:{justifyContent:"space-between"},justify_center:{justifyContent:"center"},alignItems:{alignItems:"stretch"},alignItemsCenter:{alignItems:"center"},directionColumn:{flexDirection:"column"},directionRow:{flexDirection:"row"},flex_wrap:{flexWrap:"wrap"},m_0:{margin:"0 !important"},my_0:{marginTop:"0 !important",marginBottom:"0 !important"},mx_0:{marginLeft:"0 !important",marginRight:"0 !important"},mt_0:{marginTop:"0 !important"},mt_8:{marginTop:"8px !important"},mt_10:{marginTop:"10px !important"},mt_16:{marginTop:"16px !important"},mt_20:{marginTop:"20px !important"},mt_30:{marginTop:"30px !important"},ml_10:{marginLeft:"10px !important"},ml_20:{marginLeft:"20px !important"},mr_10:{marginRight:"10px !important"},mr_16:{marginRight:"16px !important"},mr_20:{marginRight:"20px !important"},mr_auto:{marginRight:"auto !important"},mb_0:{marginBottom:"0 !important"},mb_6:{marginBottom:"6px !important"},mb_10:{marginBottom:"10px !important"},mb_16:{marginBottom:"16px !important"},mb_20:{marginBottom:"20px !important"},mb_24:{marginBottom:"24px !important"},mb_40:{marginBottom:"40px !important"},p_0:{padding:"0 !important"},p_8:{padding:"8px !important"},p_20:{padding:"20px !important"},pt_20:{paddingTop:"20px !important"},py_5:{paddingTop:5,paddingBottom:5},px_0:{paddingLeft:"0 !important",paddingRight:"0 !important"},pb_0:{paddingBottom:"0 !important"},pb_10:{paddingBottom:"10px !important"},border_TL_Radius_0:{borderTopLeftRadius:"0px !important"},border_TR_Radius_0:{borderTopRightRadius:"0px !important"},border_BL_Radius_0:{borderBottomLeftRadius:"0px !important"},border_BR_Radius_0:{borderBottomRightRadius:"0px !important"},borderRadius_4:{borderRadius:"4px !important"},border_none:{border:"none !important"},black_100:{color:e.palette.text.black},black_60:{color:"rgba(0, 0, 0, 0.6)"},textRed:{color:"red"},textYellow:{color:"yellow"},textOrange:{color:"orange"},textGreen:{color:"green"},textBlue:{color:"blue"},textAqua:{color:"aqua"},textPurple:{color:"purple"},scrollable_y:{height:"100%",overflowY:"auto"},fz_12:{fontSize:12},fz_14:{fontSize:14},fz_16:{fontSize:16},viewBtn:{width:36,height:24,display:"flex",alignItems:"center",paddingLeft:10,cursor:"pointer"},viewIcon:{fontSize:16,color:e.palette.customColor.themePrimary},pageContainer:{position:"relative",padding:"0 20px 20px"},rowRadioGroup:{display:"flex",flexDirection:"row",alignItems:"center"},rowRadioGroupLabel:{color:e.palette.text.black,fontSize:14,marginRight:25},radioRoot:{"& .MuiSvgIcon-root":{height:20,width:20}},checkboxRoot:{"& .MuiSvgIcon-root":{height:20,width:20}},defaultInput:{maxWidth:200,minWidth:150,maxHeight:40,"& .MuiOutlinedInput-root":{height:40}},unlimitWidthInput:{maxHeight:40,"& .MuiOutlinedInput-root":{height:40},"& .MuiInputLabel-outlined":{transform:"translate(14px, 14px) scale(1)"},"& .MuiInputLabel-outlined.MuiInputLabel-shrink":{transform:"translate(14px, -6px) scale(0.75)"}},unlimitWidthSelect:{maxHeight:40,height:40,"& .MuiSelect-outlined":{padding:"12px 14px",paddingRight:32},"& .MuiSelect-icon":{top:"calc(50% - 8px)"},"& .MuiFormLabel-root":{transform:"translate(14px, 14px) scale(1)"},"& .MuiFormLabel-root.MuiInputLabel-shrink":{transform:"translate(14px, -6px) scale(0.75)"}},ctrlBarDatePicker:{width:200,backgroundColor:e.palette.customColor.trans},tabs:{"& .MuiTab-wrapper":{fontSize:"14px"}},defaultTextField:{"& .MuiFormHelperText-root":{fontSize:"14px"}}}}},386:function(e,t,n){"use strict";n(0);var a=n(353),c=n(345),r=n(336),o=n(761),i=n(1),s=Object(o.a)((function(){return{marginRight10:{marginRight:10}}}));t.a=function(e){var t=e.isOpen,n=e.onClose,o=e.title,l=e.content,d=e.onConfirm,u=e.confrimText,b=Object(r.a)().t,j=s();return Object(i.jsxs)(a.b,{isOpen:t,onClose:n,title:o,children:[Object(i.jsx)("div",{style:{width:350},children:Object(i.jsx)("p",{style:{whiteSpace:"pre-line",wordBreak:"break-all"},children:l})}),Object(i.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",paddingTop:10},children:[Object(i.jsx)(c.a,{children:b("cancel"),classes:{root:j.marginRight10},onClick:function(){n()}}),Object(i.jsx)(c.c,{children:u||b("confirm"),onClick:function(){d&&d(),n()}})]})]})}},389:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o}));var a=["#434E86","#955096","#DD5282","#FF6F54","#FFA600","#BBA700","#75A100","#007561","#0082A4","#7C7C7C"],c=1024,r=1048576,o=1073741824},410:function(e,t,n){"use strict";var a=n(60),c=(n(0),n(18)),r=n(336),o=n(28),i=n(19),s=n(411),l=n.n(s),d=n(1);t.a=function(){var e=Object(r.a)().t,t=Object(c.j)().url;(t=t.split("/")).shift();var n=t.map((function(t,n){return 0===n?{name:e("routeName.".concat(t)),path:t}:{name:e("".concat(t)),path:t}})),s=[{name:e("home"),path:"/entry"}].concat(Object(a.a)(n));return Object(d.jsxs)("div",{className:l.a.container,children:[Object(d.jsx)("h2",{className:l.a.title,children:Object(i.last)(s).name}),Object(d.jsx)("ul",{className:l.a.breadcrumbs,children:s.map((function(e,t){if(t===s.length-1)return Object(d.jsx)("li",{children:Object(d.jsx)("a",{disabled:!0,href:"#",children:e.name})},t);var n=e.path;return"/"!==n.charAt(0)&&(n="/".concat(e.path)),Object(d.jsx)("li",{children:Object(d.jsx)(o.a,{to:n,children:e.name})},t)}))})]})}},411:function(e,t,n){e.exports={container:"BreadCrumbs_container__2UAi9",title:"BreadCrumbs_title__35kKu",breadcrumbs:"BreadCrumbs_breadcrumbs__162cE"}},511:function(e,t,n){"use strict";var a=n(16),c=n(425),r=n.n(c),o=n(19),i=n(0),s=n.n(i),l=n(560),d=n(1),u=s.a.lazy((function(){return n.e(22).then(n.t.bind(null,673,7))}));t.a=function(e){var t=e.className,n=e.style,c=e.monacoProps,b=e.completionItems,j=e.schemas,m=e.monacoRef,p=Object(i.useRef)(null),_=Object(i.useRef)(null),O=Object(i.useRef)({suggestions:[]}),f=function(){null!==_.current&&_.current.layout()};Object(i.useEffect)((function(){return window.addEventListener("resize",f),function(){window.removeEventListener("resize",f)}}));var h=function(e,t){Object(o.isNil)(t)?e.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,schemas:t}):e.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!1,schemas:[]})};Object(i.useLayoutEffect)((function(){null!==p.current&&h(p.current,j)}),[j]),Object(i.useEffect)((function(){b&&(O.current={suggestions:b.map((function(e){return{label:e,insertText:e}}))})}),[b]);var x=null;return Object(o.isNil)(c.editorDidMount)||(x=c.editorDidMount,delete c.editorDidMount),Object(d.jsx)("div",{className:r()(l.monacoHack,t),style:Object(a.a)({flexGrow:1,minHeight:0,borderRadius:4,overflow:"hidden"},n),children:Object(d.jsx)(s.a.Suspense,{fallback:Object(d.jsx)(d.Fragment,{children:"Loading..."}),children:Object(d.jsx)(u,Object(a.a)({editorDidMount:function(e,t){_.current=e,p.current=t,Object(o.isNil)(m)||(m.current=t);for(var n=0,a=["json","yaml","plaintext","shell"];n<a.length;n++){var c=a[n];p.current.languages.registerCompletionItemProvider(c,{provideCompletionItems:function(){return O.current}})}h(p.current,j),null!==x&&x(e,t)},language:"text",theme:"vs-dark"},c))})})}},513:function(e,t,n){e.exports={container:"Form_container__hsnhr",title:"Form_title__vrj5G",input:"Form_input__b_KMf",select:"Form_select__1kxWR",radioGroup:"Form_radioGroup__1nLA5",marginRight10:"Form_marginRight10__2asw7",width20:"Form_width20__aADVw",width45:"Form_width45__3NYpk",width50:"Form_width50__22nDl",width100:"Form_width100__1iXF7"}},560:function(e,t,n){e.exports={monacoHack:"monaco-hack_monacoHack__1pO5W"}},605:function(e,t,n){e.exports={container:"TaskRole_container__BFzra",content:"TaskRole_content__3ClFj",footer:"TaskRole_footer__22Caw",formContent:"TaskRole_formContent__2ctMW",row:"TaskRole_row__1HJT6",tabContainer:"TaskRole_tabContainer__q64EN",tabAdd:"TaskRole_tabAdd__1_hqa",paddingBottom72:"TaskRole_paddingBottom72__X6XzZ",marginTop10:"TaskRole_marginTop10__2W8-8",paddingLeftRight10:"TaskRole_paddingLeftRight10__1sRaD",width20:"TaskRole_width20__fzs7e",width25:"TaskRole_width25__2Tz4X",width45:"TaskRole_width45__1cAh_",width50:"TaskRole_width50__AyaCS",width75:"TaskRole_width75__30vVU",width100:"TaskRole_width100__2QaWP"}},661:function(e,t,n){"use strict";var a=n(16),c=n(121),r=(n(0),n(903)),o=n(567),i=n(662),s=n(1),l=["children","withBorder","items"];t.a=function(e){var t=e.children,n=e.withBorder,d=void 0===n||n,u=e.items,b=void 0===u?[]:u,j=Object(c.a)(e,l),m={root:{borderBottom:d?"2px solid #eee":"none"},link:{paddingRight:8,paddingLeft:8,width:"auto",height:38},linkIsSelected:{marginRight:8,paddingRight:8,paddingLeft:8,width:"auto",selectors:{":before":{transition:" left 0.267s cubic-bezier(0.1, 0.25, 0.75, 0.9) 0s, right 0.267s cubic-bezier(0.1, 0.25, 0.75, 0.9) 0s"},":hover:before":{left:0,right:0,transition:" left 0.267s cubic-bezier(0.1, 0.25, 0.75, 0.9) 0s, right 0.267s cubic-bezier(0.1, 0.25, 0.75, 0.9) 0s"}}},linkContent:{margin:"auto"}};return Object(s.jsxs)(r.a,Object(a.a)(Object(a.a)({linkSize:o.b.large,styles:m},j),{},{children:[b&&b.map((function(e){return Object(s.jsx)(i.a,{headerText:e.text,itemKey:e.key,styles:e.styles},e.key)})),t]}))}},715:function(e,t,n){e.exports={container:"Memory_container__2YUWy",content:"Memory_content__2FptF",shm:"Memory_shm__3wuGH"}},804:function(e,t,n){e.exports={container:"ViewSchedule_container__1lA-i",title:"ViewSchedule_title__2yWIh",icon:"ViewSchedule_icon__D4pI3",wrapper:"ViewSchedule_wrapper__8mWTM",row:"ViewSchedule_row__DxEeC",row__title:"ViewSchedule_row__title__WBLum",row__title__state:"ViewSchedule_row__title__state__RKM5n","row__title__state--denied":"ViewSchedule_row__title__state--denied__3gSaJ","row__title__state--verifying":"ViewSchedule_row__title__state--verifying__Yyy9A","row__title__state--verified":"ViewSchedule_row__title__state--verified__2W_Dp",row__description:"ViewSchedule_row__description__3-oZa",row__name:"ViewSchedule_row__name__3ZPNX","schedule__container__block__info--state":"ViewSchedule_schedule__container__block__info--state__vClMN","schedule__container__block__info--red":"ViewSchedule_schedule__container__block__info--red__3Kcn5","schedule__container__block__info--green":"ViewSchedule_schedule__container__block__info--green__pD8sV"}},806:function(e,t,n){e.exports={form:"CreateSchedule_form__2Z9JR",title:"CreateSchedule_title__dgy1_",title__left:"CreateSchedule_title__left__1uRgW",title__right:"CreateSchedule_title__right__1LGbH",title__right__icon:"CreateSchedule_title__right__icon__1byDn",container:"CreateSchedule_container__3Qz3Q",row:"CreateSchedule_row__GEUqz",row__average:"CreateSchedule_row__average__39lI_",row__average__block:"CreateSchedule_row__average__block__YhNuO",row__right:"CreateSchedule_row__right__rI4d5",row__right__block:"CreateSchedule_row__right__block__2apLT",footer:"CreateSchedule_footer__3wG6p"}},807:function(e,t,n){e.exports={container:"Form_container__3NYhT",title:"Form_title__2UH1G",input:"Form_input__3hIB6",select:"Form_select__37S2C",radioGroup:"Form_radioGroup__ikUMt"}},808:function(e,t,n){e.exports={container:"Step1_container__27aTo",row:"Step1_row__12x02",row__average:"Step1_row__average__3Hgh8",row__average__block:"Step1_row__average__block__3yxox",row__average__block50:"Step1_row__average__block50__1ICcU",row__right:"Step1_row__right__2paOy",row__right__block:"Step1_row__right__block__2DmsR",row__borderBottomLine:"Step1_row__borderBottomLine__1CpQv",footer:"Step1_footer__1bOuQ",paddingBottom72:"Step1_paddingBottom72__2Ix-t",marginTop10:"Step1_marginTop10__346Hp",paddingBottom10:"Step1_paddingBottom10__pBI7a",width100:"Step1_width100__2_-7V"}},809:function(e,t,n){e.exports={container:"ViewModal_container__1XnRn",top:"ViewModal_top__dDvpy",top__block:"ViewModal_top__block__3uh-3",top__block__item__title:"ViewModal_top__block__item__title__1J9eE",top__block__item:"ViewModal_top__block__item__3YC9e",top__block__item__description:"ViewModal_top__block__item__description__qJqn6",top__block__item__25:"ViewModal_top__block__item__25__2s-P6",top__block__item__75:"ViewModal_top__block__item__75__TsSq7",top__borderBottom:"ViewModal_top__borderBottom__G0IBl",wrapper:"ViewModal_wrapper__30QN1",wrapper__block:"ViewModal_wrapper__block__1d6q_",wrapper__block__title:"ViewModal_wrapper__block__title__2JacB",block__title__20:"ViewModal_block__title__20__HPCgh",block__title__25:"ViewModal_block__title__25__1UonR",block__title__50:"ViewModal_block__title__50__1zM5y",wrapper__block__item:"ViewModal_wrapper__block__item__3pGRt",block__item__20:"ViewModal_block__item__20__2-nn8",block__item__25:"ViewModal_block__item__25__1KL7-",block__item__50:"ViewModal_block__item__50__2CoX4",wrapper__block__command:"ViewModal_wrapper__block__command__-khYE",wrapper__borderBottom:"ViewModal_wrapper__borderBottom__1SX3v",footer:"ViewModal_footer__1BRaG",marginTop10:"ViewModal_marginTop10__DUV7w",marginBottom10:"ViewModal_marginBottom10__21mzU",paddingTop10:"ViewModal_paddingTop10__1zB4C",paddingBottom10:"ViewModal_paddingBottom10__2BI64"}},811:function(e,t,n){e.exports={searchBlock:"Step2Table_searchBlock__1IJaA",searchBlockRight:"Step2Table_searchBlockRight__3GUAb",container:"Step2Table_container__1bb0Q",row:"Step2Table_row__2DGPI",template:"Step2Table_template__3XJeI",line:"Step2Table_line__pEf0l",marginTop10:"Step2Table_marginTop10__2aYhH",marginLeft10:"Step2Table_marginLeft10__3Z6Dz",marginLeft25:"Step2Table_marginLeft25__ndwya"}},812:function(e,t,n){e.exports={container:"Step3_container__3Fboo",vgStateContainer:"Step3_vgStateContainer__8qlEc",header:"Step3_header__3gnrx",headerBorderBottom:"Step3_headerBorderBottom__bxeu2",errorColor:"Step3_errorColor__3Pa5C",footer:"Step3_footer__2xBUi",width25:"Step3_width25__1dNtZ",width100:"Step3_width100__B5uZa",marginBottom10:"Step3_marginBottom10__3AmSw"}},813:function(e,t,n){e.exports={container:"Step4_container__2GK_K",footer:"Step4_footer__qaXjE",paddingBottom72:"Step4_paddingBottom72__1BtKj",width100:"Step4_width100__1To-X"}},814:function(e,t,n){e.exports={container:"Disk_container__y-ieJ",content:"Disk_content__k43uC"}},815:function(e,t,n){e.exports={container:"GPU_container__3H6FM",content:"GPU_content__22R2-"}},816:function(e,t,n){e.exports={container:"CPU_container__1NEXR",vertical:"CPU_vertical__3A8xO",horizontal:"CPU_horizontal__1_R6x",content:"CPU_content__AkRZu",cpu:"CPU_cpu__1x_P9"}},817:function(e,t,n){e.exports={container1:"PreviewModal_container1__3HcN5",cell:"PreviewModal_cell__njY2O",small:"PreviewModal_small__Vlr9F",normal:"PreviewModal_normal__2aadu",gpu:"PreviewModal_gpu__1DQrT"}},818:function(e,t,n){e.exports={title:"ModifyScheduleModal_title__19r-4",name:"ModifyScheduleModal_name__1JqRf",icons:"ModifyScheduleModal_icons__2xbVA",form:"ModifyScheduleModal_form__3LHkT",row:"ModifyScheduleModal_row__38Yp2",row__left:"ModifyScheduleModal_row__left__2djMx",row__right:"ModifyScheduleModal_row__right__184Wk",row__right__block:"ModifyScheduleModal_row__right__block__FbjkW",footer:"ModifyScheduleModal_footer__25O2F"}},819:function(e,t,n){e.exports={searchBlock:"Schedule_searchBlock__1sZVr",searchBlock__left:"Schedule_searchBlock__left__xmWwv"}},965:function(e,t,n){"use strict";n.r(t);var a=n(16),c=n(10),r=n(0),o=n.n(r),i=n(336),s=n(908),l=n(801),d=n(803),u=n(35),b=n(1),j=function(e,t){var n=Object(i.a)().t,c=Object(r.useContext)(u.a).locale;return Object(b.jsx)(s.a,Object(a.a)({buttonText:{today:n("today"),month:"month",week:"week",day:"day",list:"list"},defaultView:"dayGridMonth",headerToolbar:{start:"prev,next today",center:"title",end:""},height:"100%",locale:"jp"===c?"ja":c,plugins:[l.a,d.a],ref:t},e))},m=o.a.forwardRef(j),p=n(410),_=n(121),O=n(957),f=["children"],h={root:{height:"32px",border:"1px solid transparent",boxSizing:"border-box",borderRadius:"3px"}},x=function(e){var t=e.children,n=Object(_.a)(e,f);return Object(b.jsx)(O.a,Object(a.a)(Object(a.a)({styles:h},n),{},{children:t}))},g=n(6),v=n(699),y=["children"],k=Object(g.B)(),w={root:{border:"1px solid",borderColor:"#8A8886",borderRadius:"3px",padding:"0 15px",width:"auto",height:"32px",backgroundColor:k.palette.white,boxSizing:"border-box",textAlign:"center",color:"".concat(k.palette.black," !important"),fontWeight:"normal"},label:{fontWeight:"normal"}},N=function(e){var t=e.children,n=Object(_.a)(e,y);return Object(b.jsx)(v.a,Object(a.a)(Object(a.a)({styles:w},n),{},{children:t}))},S=n(636),C=Object(g.B)(),M=(C.palette.themePrimary,C.palette.themePrimary,n(994),Object(g.B)(),n(990)),R=n(978),B=n(907),I=n(582),T=n(587),E=n(386),A=n(19),P=n(46),D=n.n(P),z=n(34),F=n(73),V=n(804),G=n.n(V);var L=function(e){var t=e.getData,n=e.data,a=e.onClose,o=e.onOpenModifyModal,s=e.selectedVg,l=Object(i.a)().t,d=Object(r.useState)(!1),u=Object(c.a)(d,2),j=u[0],m=u[1],p=n.startAt>(new Date).getTime(),_=n.startAt<(new Date).getTime();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:G.a.container,children:[Object(b.jsxs)("div",{className:G.a.title,children:[_&&-1===n.state&&Object(b.jsx)("div",{className:G.a.icon,children:Object(b.jsx)(T.a,{iconName:"Edit",onClick:function(){o(),a()},children:"icon1"})}),p&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:G.a.icon,children:Object(b.jsx)(T.a,{iconName:"Edit",onClick:function(){o(),a()}})}),Object(b.jsx)("div",{className:G.a.icon,children:Object(b.jsx)(T.a,{iconName:"Delete",onClick:function(){return m(!0)}})})]}),Object(b.jsx)("div",{className:G.a.icon,children:Object(b.jsx)(T.a,{iconName:"Cancel",onClick:function(){return a()}})})]}),Object(b.jsxs)("div",{className:G.a.wrapper,children:[Object(b.jsxs)("div",{className:G.a.row,children:[Object(b.jsx)("div",{className:"".concat(G.a.row__title," ").concat(function(e){switch(e){case-1:return G.a["schedule__container__block__info--red"];case 0:return G.a["schedule__container__block__info--state"];case 1:return G.a["schedule__container__block__info--green"];default:return"green"}}(n.state)),children:Object(b.jsx)("div",{className:"".concat(G.a.row__title__state," ").concat(function(e){switch(e){case-1:return G.a["row__title__state--denied"];case 0:return G.a["row__title__state--verifying"];case 1:return G.a["row__title__state--verified"];default:return""}}(n.state)),children:function(e){switch(e){case-1:return Object(b.jsx)("div",{style:{background:"#FFE4DD",display:"inline-block"},children:l("denied")});case 0:return Object(b.jsx)("div",{style:{background:"#FFF8EA",display:"inline-block"},children:l("verifying")});case 1:return Object(b.jsx)("div",{style:{background:"#D6F8C5",display:"inline-block"},children:l("verified")});default:return""}}(n.state)})}),Object(b.jsx)("div",{className:G.a.row__name,children:n.name})]}),Object(b.jsxs)("div",{className:G.a.row,children:[Object(b.jsx)("div",{className:G.a.row__title,children:l("time")}),Object(b.jsxs)("div",{className:G.a.row__description,children:[D()(n.startAt).format("MM/DD HH:mm")," - ",D()(n.endAt).format("MM/DD HH:mm")]})]}),Object(b.jsxs)("div",{className:G.a.row,children:[Object(b.jsx)("div",{className:G.a.row__title,children:l("virtualCluster")}),Object(b.jsx)("div",{className:G.a.row__description,children:n.virtualGroup})]}),Object(b.jsxs)("div",{className:G.a.row,children:[Object(b.jsx)("div",{className:G.a.row__title,children:l("CPU")}),Object(b.jsx)("div",{className:G.a.row__description,children:n.cpu})]}),Object(b.jsxs)("div",{className:G.a.row,children:[Object(b.jsx)("div",{className:G.a.row__title,children:l("memory")}),Object(b.jsxs)("div",{className:G.a.row__description,children:[n.memory," MB"]})]}),Object(b.jsxs)("div",{className:G.a.row,children:[Object(b.jsx)("div",{className:G.a.row__title,children:l("disk")}),Object(b.jsxs)("div",{className:G.a.row__description,children:[n.storage," GB"]})]}),Object(b.jsxs)("div",{className:G.a.row,children:[Object(b.jsx)("div",{className:G.a.row__title,children:l("GPU")}),Object(b.jsx)("div",{className:G.a.row__description,children:Object(A.isEmpty)(n.gpu)?Object(b.jsx)("div",{children:l("no2")}):Object.keys(n.gpu).map((function(e){return Object(b.jsxs)("div",{children:[n.gpu[e]," ( ",e," )"]},e)}))})]})]})]}),Object(b.jsx)(E.a,{confrimText:l("delete"),content:l("sureDelete",{name:n.name}),isOpen:j,onClose:function(){return m(!1)},onConfirm:function(){Object(F.q)(n.id).then((function(){m(!1),a(),t(s),z.b.success(l("success"))})).catch((function(e){z.b.error(e.data.message)}))},title:"".concat(l("delete")).concat(l("enSpace"))})]})},U=n(84),H=n(14),W=n(761),K=n(959),q=n(960),J=n(983),Z=n(958),Y=function(e){var t=e.title,n=e.isRequired,a=e.activeStep,c=e.steps,r=Object(H.a)({alternativeLabel:{top:8,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"},lineHorizontal:{borderTopWidth:"1px"}})(Z.a),o=Object(W.a)((function(e){return{root:{width:"100%"},backButton:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},label:{fontSize:"14px"},iconContainer:{transform:"scale(1.6)"},text:{fontSize:"12px"}}}))();return Object(b.jsxs)("div",{children:[t&&Object(b.jsxs)("div",{style:{padding:"5px 0"},children:[t,n&&Object(b.jsx)("span",{style:{color:"red"},children:" *"})]}),Object(b.jsx)(K.a,{activeStep:a,alternativeLabel:!0,connector:Object(b.jsx)(r,{}),children:c.map((function(e){return Object(b.jsx)(q.a,{children:Object(b.jsx)(J.a,{StepIconProps:{classes:{text:o.text}},classes:{iconContainer:o.iconContainer,label:o.label},children:e})},e)}))})]})},$=n(41),X=n(42),Q=n(4),ee=n.n(Q),te=n(11),ne=(n(805),/^<% \$secrets.([a-zA-Z_][a-zA-Z0-9_]*) %>/),ae=[{key:"PAI_JOB_NAME",desc:"jobName in config file"},{key:"PAI_USER_NAME",desc:"User who submit the job"},{key:"PAI_DEFAULT_FS_URI",desc:"Default file system uri in PAI"},{key:"PAI_TASK_ROLE_COUNT",desc:"Total task roles' number in config file"},{key:"PAI_TASK_ROLE_LIST",desc:"Comma separated all task role names in config file"},{key:"PAI_TASK_ROLE_TASK_COUNT_$taskRole",desc:"Task count of the task role"},{key:"PAI_HOST_IP_$taskRole_$taskIndex",desc:"The host IP for taskIndex task in taskRole"},{key:"PAI_PORT_LIST_$taskRole_$taskIndex_$portType",desc:"The $portType port list for taskIndex task in taskRole"},{key:"PAI_RESOURCE_$taskRole",desc:'Resource requirement for the task role in "gpuNumber,cpuNumber,memMB,shmMB" format'},{key:"PAI_MIN_FAILED_TASK_COUNT_$taskRole",desc:"taskRole.minFailedTaskCount of the task role"},{key:"PAI_MIN_SUCCEEDED_TASK_COUNT_$taskRole",desc:"taskRole.minSucceededTaskCount of the task role"},{key:"PAI_CURRENT_TASK_ROLE_NAME",desc:"taskRole.name of current task role"},{key:"PAI_CURRENT_TASK_ROLE_CURRENT_TASK_INDEX",desc:"Index of current task in current task role, starting from 0"}],ce=[{key:"tensorflow-gpu-python3.6",text:"tensorflow+python3.6 with gpu, cuda 9.0 (image: ufoym/deepo:tensorflow-py36-cu90)",image:"ufoym/deepo:tensorflow-py36-cu90"},{key:"tensorflow-cpu-python3.6",text:"tensorflow+python3.6 with cpu (image: ufoym/deepo:tensorflow-py36-cpu)",image:"ufoym/deepo:tensorflow-py36-cpu"},{key:"tensorflow-gpu-python2.7",text:"tensorflow+python2.7 with gpu, cuda 9.0 (image: ufoym/deepo:tensorflow-py27-cu90)",image:"ufoym/deepo:tensorflow-py27-cu90"},{key:"tensorflow-cpu-python2.7",text:"tensorflow+python2.7 with cpu (image: ufoym/deepo:tensorflow-py27-cpu)",image:"ufoym/deepo:tensorflow-py27-cpu"},{key:"pytorch-gpu",text:"pytorch+python3.6 with gpu, cuda 9.0 (image: ufoym/deepo:pytorch-py36-cu90)",image:"ufoym/deepo:pytorch-py36-cu90"},{key:"pytorch-cpu",text:"pytorch+python3.6 with cpu (image: ufoym/deepo:pytorch-py36-cpu)",image:"ufoym/deepo:pytorch-py36-cpu"}],re=function(){window.dispatchEvent(new Event("resize"))};function oe(e){if(Object(A.isObject)(e)){var t=Object(a.a)({},e);return Object.keys(t).forEach((function(e){var n=t[e];Object(A.isEmpty)(n)&&(Object(A.isObject)(n)||Object(A.isArrayLike)(n)||Object(A.isNil)(n))&&delete t[e]})),t}}var ie=function(){function e(t){Object($.a)(this,e);var n=t.uri,a=t.auth,c=t.secretRef,r=t.name,o=t.isUseCustomizedDocker;this.uri=n||"",this.auth=a||{},this.secretRef=Object(A.isEmpty)(c)?"":c,this.name=r||"",this.isUseCustomizedDocker=o||!0}return Object(X.a)(e,[{key:"convertToProtocolFormat",value:function(){var e=Object(a.a)({},this.auth);return Object(A.isEmpty)(this.secretRef)||(e.password=this.secretRef),oe({type:"dockerimage",auth:e,uri:this.uri.trim(),name:this.name})}}],[{key:"fromProtocol",value:function(t,n){var c,r=Object(A.get)(t,"auth.password","");if(!Object(A.isNil)(r)){var o=ne.exec(r);o=Object(A.isEmpty)(o)?"":o[1],Object(A.isEmpty)(o)||Object(A.isNil)(n[o])?(c={},r=""):c=Object(a.a)(Object(a.a)({},t.auth),{},{password:n[o]})}var i=e.isUseCustomizedDocker(t.uri);return new e(Object(a.a)(Object(a.a)({},t),{},{auth:c,secretRef:r,isUseCustomizedDocker:i}))}},{key:"isUseCustomizedDocker",value:function(e){return Object(A.isNil)(ce.find((function(t){return t.image===e})))}}]),e}(),se=function(){function e(t){Object($.a)(this,e);var n=t.minFailedInstances,a=t.minSucceededInstances;this.minFailedInstances=void 0===n?1:n,this.minSucceededInstances=void 0===a?1:a}return Object(X.a)(e,[{key:"convertToProtocolFormat",value:function(){return{minFailedInstances:this.minFailedInstances,minSucceededInstances:this.minSucceededInstances}}}],[{key:"fromProtocol",value:function(t){return Object(A.isNil)(t)?new e({}):new e(t)}}]),e}(),le=function(){function e(t){Object($.a)(this,e);var n=t.preCommands,a=t.postCommands;this.preCommands=n||"",this.postCommands=a||""}return Object(X.a)(e,[{key:"convertToProtocolFormat",value:function(){return oe({preCommands:Object(A.isEmpty)(this.preCommands)?[]:this.preCommands.trim().split("\n"),postCommands:Object(A.isEmpty)(this.postCommands)?[]:this.postCommands.trim().split("\n")})}}],[{key:"fromProtocol",value:function(t){var n=t.preCommands,a=t.postCommands;return new e({preCommands:Object(A.isNil)(n)?"":n.join("\n"),postCommands:Object(A.isNil)(a)?"":a.join("\n")})}}]),e}(),de=2,ue=1024;var be=function(){function e(t){Object($.a)(this,e);var n=t.name,a=t.instances,c=t.dockerInfo,r=t.ports,o=t.commands,i=t.completion,s=t.deployment,l=t.containerSize,d=t.isContainerSizeEnabled,u=t.taskRetryCount,b=t.shmMB;this.name=n||"",this.instances=a||1,this.dockerInfo=c||new ie({uri:""}),this.ports=r||[],this.commands=o||"",this.completion=i||new se({}),this.deployment=s||new le({}),this.containerSize=l||function(e){Object(A.isNil)(e)&&(e=1);var t=Math.max(e,1);return{gpu:e,cpu:t*de,memoryMB:t*ue,storageGB:5}}(),this.isContainerSizeEnabled=d||!1,this.taskRetryCount=u||0,this.shmMB=b||64}return Object(X.a)(e,[{key:"getDockerPrerequisite",value:function(){return this.dockerInfo.convertToProtocolFormat()}},{key:"getDeployment",value:function(){return this.deployment.convertToProtocolFormat()}},{key:"convertToProtocolFormat",value:function(){var e={},t=this.ports.reduce((function(e,t){return"string"===typeof t.value?e[t.key]=parseInt(t.value):e[t.key]=t.value,e}),{}),n=oe(Object(a.a)(Object(a.a)({},this.containerSize),{},{ports:t}));return e[this.name]=oe({instances:this.instances,shmMB:this.shmMB,completion:this.completion,dockerImage:this.dockerInfo.name,resourcePerInstance:n,commands:Object(A.isEmpty)(this.commands)?[]:this.commands.trim?this.commands.trim().split("\n").map((function(e){return e.trim()})):this.commands,taskRetryCount:this.taskRetryCount}),e}}],[{key:"fromProtocol",value:function(t,n,a,r,o){var i=Object(A.get)(n,"instances",1),s=Object(A.get)(n,"completion",{}),l=Object(A.get)(n,"dockerImage"),d=Object(A.get)(n,"resourcePerInstance",{}),u=Object(A.get)(n,"commands",[]),b=Object(A.get)(n,"shmMB",0),j=Object(A.get)(a[0],"taskRoles.".concat(t),{}),m=r.find((function(e){return e.name===l}))||{},p=Object(A.isNil)(d.ports)?[]:Object.entries(d.ports).map((function(e){var t=Object(c.a)(e,2);return{key:t[0],value:t[1].toString()}})),_=Object(A.get)(n,"taskRetryCount",0),O=new e({name:t,instances:i,completion:se.fromProtocol(s),commands:Object(A.isNil)(u)?"":u.join("\n"),containerSize:d,deployment:le.fromProtocol(j),dockerInfo:ie.fromProtocol(m,o),ports:p,shmMB:b,taskRetryCount:_});return function(e){var t=Math.max(e.gpu,1);return e.cpu===de*t&&e.memoryMB===e.memoryMB*t}(O.containerSize)||(O.isContainerSizeEnabled=!0),O}}]),e}(),je=n(389),me=n(806),pe=n.n(me),_e=o.a.createContext(null),Oe=n(60),fe=n(991),he=function(e){var t=Object.assign({},e);return Object(b.jsx)(fe.a,Object(a.a)({styles:{root:{minWidth:200,width:200,height:32,borderRadius:"3px"}}},t))},xe=n(984),ge=function(e){var t=Object.assign({},e);return Object(b.jsx)(xe.a,Object(a.a)({styles:{fieldGroup:{borderRadius:"3px"}}},t))},ve=n(982),ye=n(988),ke=function(e){var t=Object.assign({},e);return Object(b.jsx)(ye.a,Object(a.a)({styles:{checkbox:{borderRadius:"3px"}}},t))},we=["styles"],Ne=function(e){var t=e.styles,n=Object(_.a)(e,we);return Object(b.jsx)(R.a,Object(a.a)({styles:Object(a.a)({root:{minWidth:150,fontSize:14},title:{borderRadius:"3px"}},t)},n))},Se=n(975),Ce=function(e){var t=Object.assign({},e);return Object(b.jsx)(Se.a,Object(a.a)({},t))},Me=(n(987),n(981)),Re=n(426),Be=n(996),Ie=n(693),Te=n(181),Ee=n(39),Ae=n(697),Pe=n(696),De=n(695),ze=n(496),Fe=["title","isRequired"],Ve=function(e){var t=e.title,n=e.isRequired,c=Object(_.a)(e,Fe),o=Object(r.useContext)(u.a).locale,i=Object(W.a)((function(e){return{root:{width:"100%","& > .MuiInputBase-root":{border:"1px solid rgb(161, 159, 157)",height:32,borderRadius:3,padding:12,cursor:"pointer","& > input":{cursor:"pointer"}}},margin:{margin:e.spacing(5)}}})),s=Object(Te.a)({palette:{primary:{main:Ee.a.themePrimary}}}),l=i();return Object(b.jsxs)("div",{style:{width:"100%"},children:[Object(b.jsxs)("div",{style:{padding:"5px 0"},children:[t,n&&Object(b.jsx)("span",{style:{color:"red"},children:" *"})]}),Object(b.jsx)(Re.a,{locale:function(e){switch(e){case"zh-CN":return Ae.a;case"zh-TW":return Pe.a;case"jp":return De.a;default:return ze.a}}(o),themes:s,utils:Ie.a,children:Object(b.jsx)(Be.a,Object(a.a)({InputProps:{disableUnderline:!0},ampm:!1,className:"".concat(l.root),format:"yyyy/MM/dd HH:mm"},c))})]})},Ge=n(807),Le=n.n(Ge),Ue=n(973),He=n(355),We=["title","hint","fieldError","onChange","onIncrement","onDecrement","onValidate","min","max","errorMessage","style"],Ke=function(e){var t=e.title,n=e.hint,c=e.fieldError,i=e.onChange,s=e.onIncrement,l=e.onDecrement,d=e.onValidate,u=e.min,j=e.max,m=e.errorMessage,p=e.style,O=Object(_.a)(e,We),f=Object(r.useCallback)((function(e,t,n){var a=n;return Object(A.isNil)(u)||(a=Math.max(u,a)),Object(A.isNil)(j)||(a=Math.min(j,a)),void 0!==t&&(a=t(e)),void 0===i?a:i(a)}),[i]);return Object(b.jsxs)("div",{className:Le.a.container,style:p,children:[Object(b.jsxs)("div",{className:Le.a.title,children:[Object(b.jsx)("label",{children:t}),n&&Object(b.jsx)(Ue.a,{calloutProps:{isBeakVisible:!1,directionalHint:He.a.topAutoEdge,gapSpace:8},content:n,tooltipProps:o.a.isValidElement(n)?{onRenderContent:function(){return n}}:{},children:Object(b.jsx)(T.a,{iconName:"Info",styles:{root:{verticalAlign:"middle",cursor:"pointer",margin:"0 5px"}}})})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)(Me.a,Object(a.a)(Object(a.a)({},O),{},{min:0,onDecrement:Object(A.debounce)((function(e){return f(e,l,+e-1)}),10),onIncrement:Object(A.debounce)((function(e){return f(e,s,+e+1)}),10),onValidate:Object(A.debounce)((function(e){return f(e,d,e)}),10),step:1,styles:{root:{border:c?"rgb(168,0,0) 1px solid":"",borderRadius:3},spinButtonWrapper:{borderRadius:3,paddingRight:10,border:c?"none":"1px solid #A19F9D"}}})),m&&Object(b.jsx)("span",{style:{fontSize:12,color:"rgb(168, 0, 0)"},children:m})]})]})},qe=function e(t){Object($.a)(this,e);var n=t.modify,a=t.step1State,c=t.userInfo;this.name=a.name||"",this.users=void 0!==a.user?[a.user]:[c.username],this.startAt=D()(a.startAt).seconds(0).milliseconds(0).valueOf(),this.endAt=D()(a.endAt).seconds(0).milliseconds(0).valueOf(),this.cpu=a.cpu,this.memory=a.memory,this.storage=a.storage,this.virtualGroup=n?null:a.virtualGroup,this.gpu=a.gpu,this.jobConfig=null},Je=n(808),Ze=n.n(Je),Ye=function(e,t,n,r){var o=[],i=0,s=0,l=Object.entries(n).reverse();if(!l.find((function(e,n){var a=Object(c.a)(e,1)[0];return s=n,t>Number(a)})))return r;l.find((function(t,n){var a=Object(c.a)(t,1)[0];return i=n,e>=Number(a)}));for(var d=s;d<=i;d++)o.push(l[d]);var u=o.reduce((function(e,t){var n=Object(c.a)(t,2)[1],o=Object(a.a)({},e.gpu);return Object.entries(r.gpu).forEach((function(e){var t=Object(c.a)(e,2),a=t[0],r=t[1];n.gpu[a]&&(o[a]=Math.min(o[a],r-n.gpu[a]))})),e.cpu=Math.min(r.cpu-n.cpu,e.cpu),e.memory=Math.min(r.memory-n.memory,e.memory),e.storage=Math.min(r.storage-n.storage,e.storage),e.gpu=o,e}),Object(a.a)({},r));return u},$e=function(e){var t,n,o=e.dataId,s=e.setStep1State,l=e.step1State,d=e.selectedVg,u=e.selectedVgHasGpu,j=e.selectedVgUsers,m=e.setAlreadyUsedResource,p=e.createDate,_=e.isPrvScheduledJob,O=e.setIsPreScheduledJob,f=e.setActiveStep,h=e.resetDefault,v=e.defaultStep1,y=Object(i.a)().t,k=Object(r.useContext)(_e).userInfo,w=Object(r.useState)(""),S=Object(c.a)(w,2),C=S[0],M=S[1],R=Object(r.useState)(null),B=Object(c.a)(R,2),I=B[0],T=B[1],E=Object(r.useState)({}),P=Object(c.a)(E,2),V=P[0],G=P[1],L=Object(r.useState)({}),H=Object(c.a)(L,2),K=H[0],q=H[1],J=Object(r.useState)([]),Z=Object(c.a)(J,2),Y=Z[0],$=Z[1],X=Object(r.useState)(""),Q=Object(c.a)(X,2),ne=Q[0],ae=Q[1],ce=Object(r.useState)(""),re=Object(c.a)(ce,2),oe=re[0],ie=re[1],se=Object(r.useState)("".concat(k.username,"_").concat(Date.now())),le=Object(c.a)(se,2),de=le[0],ue=le[1],be=Object(r.useState)(),je=Object(c.a)(be,2),me=je[0],pe=je[1],fe=Object(r.useState)(""),he=Object(c.a)(fe,2),xe=he[0],ve=he[1],ye=Object(r.useState)(0),ke=Object(c.a)(ye,2),we=ke[0],Se=ke[1],Me=Object(r.useState)(null),Re=Object(c.a)(Me,2),Be=Re[0],Ie=Re[1],Te=Object(r.useState)(null),Ee=Object(c.a)(Te,2),Ae=Ee[0],Pe=Ee[1],De=Object(r.useState)(0),ze=Object(c.a)(De,2),Fe=ze[0],Ge=ze[1],Le=Object(r.useState)(0),Ue=Object(c.a)(Le,2),He=Ue[0],We=Ue[1],Je=Object(r.useState)(0),$e=Object(c.a)(Je,2),Xe=$e[0],Qe=$e[1],et=Object(r.useState)({}),tt=Object(c.a)(et,2),nt=tt[0],at=tt[1],ct=Object(r.useState)(!1),rt=Object(c.a)(ct,2),ot=rt[0],it=rt[1],st=Object(W.a)((function(){return{root:{margin:4,color:"red"}}}))(),lt=function(e){return e?"":y("fieldRequired")},dt=function(){var e=Object(te.a)(ee.a.mark((function e(t){return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!o){e.next=6;break}return e.next=4,Object(F.Nb)(o,t,!0);case 4:e.next=8;break;case 6:return e.next=8,Object(F.g)(t);case 8:z.b.success(y("success")),h(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0.data&&"startAt must >= now"===e.t0.data.message?z.b.error("".concat(y("time")).concat(y("enSpace")).concat(y("error"))):z.b.error(e.t0.data?e.t0.data.message:e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){if(!Object(A.isEqual)(l,v)){var e=l.user,t=l.cpu,n=l.memory,a=l.storage,c=l.gpu,r=l.gpuType,o=l.name,i=l.startAt,s=l.endAt,d=l.jobName,u=l.retryCount;Ge(t),We(n),Qe(a),at(c),M(r),ve(o),Ie(i),Pe(s),ue(d),Se(u),void 0!==e&&pe(e)}}),[l]),Object(r.useEffect)((function(){if(V.gpu){var e=Object.keys(V.gpu).map((function(e){return{key:e,text:e}}));$(e)}}),[V]),Object(r.useEffect)((function(){Object(A.isNull)(p)||Ie(p)}),[p]),Object(r.useEffect)((function(){var e,t;Object(A.isNull)(Be)||Object(A.isNull)(Ae)||(e=Be,t=Ae,Object(F.X)(d,o).then((function(n){return[Ye(D()(e).valueOf(),D()(t).valueOf(),n.data,n.virtualGroup),n.virtualGroup]})).then((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];G(n);var o=[n].reduce((function(e,t){var n=Object(a.a)({},e.gpu);return Object.entries(e.gpu).forEach((function(e){var a=Object(c.a)(e,2),r=a[0],o=a[1];t.gpu[r]&&(n[r]=o-t.gpu[r])})),e.cpu=e.cpu-t.cpu,e.memory=e.memory-t.memory,e.storage=e.storage-t.storage,e.gpu=n,e}),Object(a.a)({},r));m(o)})).catch((function(e){z.b.error(e.data.message)})))}),[Be,Ae]),Object(r.useEffect)((function(){void 0!==me?void 0===me||Object(F.lb)(me).then((function(e){return q(e.limitResource)})).catch((function(e){return z.b.error(e.data.message)})):Object(F.lb)(k.username).then((function(e){return q(e.limitResource)})).catch((function(e){return z.b.error(e.data.message)}))}),[me]),Object(r.useEffect)((function(){""===xe||D()(Ae).valueOf()-D()(Be).valueOf()<=0||isNaN(D()(Ae).valueOf()-D()(Be).valueOf())?it(!1):Object(A.isEmpty)(j)||null!==I?it(!0):it(!1)}),[xe,Be,Ae,I]),Object(b.jsxs)("div",{className:Ze.a.container,children:[!Object(A.isEmpty)(j)&&Object(b.jsx)("div",{className:Ze.a.row,children:Object(b.jsx)("div",{className:Ze.a.row__average,children:Object(b.jsx)("div",{className:Ze.a.row__average__block,children:Object(b.jsx)(Ne,{ariaLabel:"".concat(y("select")).concat(y("enSpace")).concat(y("User")),label:"".concat(y("select")).concat(y("enSpace")).concat(y("User")),onChange:function(e,t){T(t.key),ue("".concat(t.text,"_").concat(Date.now())),pe(t.text)},options:j,placeholder:"".concat(y("select")).concat(y("enSpace")).concat(y("User")),required:!0,selectedKey:I})})})}),!1===K.enabled||null===K.cpu&&null===K.memory&&null===K.storage&&null===K.gpu?Object(b.jsx)(b.Fragment,{}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"".concat(Ze.a.row," ").concat(Ze.a.marginTop10," ").concat(Ze.a.paddingBottom10),children:[y("allocatable"),y("enSpace"),y("resource")]}),Object(b.jsx)("div",{className:"".concat(Ze.a.row," ").concat(Ze.a.paddingBottom10," ").concat(Ze.a.row__borderBottomLine),children:Object(b.jsxs)("div",{className:Ze.a.row__average,children:[Object(b.jsx)("div",{className:Ze.a.row__average__block,children:Object(b.jsxs)("div",{className:"".concat(Ze.a.row),children:[Object(b.jsxs)("div",{className:Ze.a.row__average__block50,children:[Object(b.jsx)("div",{children:y("CPU")}),Object(b.jsx)("div",{children:K.cpu})]}),Object(b.jsxs)("div",{className:Ze.a.row__average__block50,children:[Object(b.jsxs)("div",{children:[y("memory")," (MB)"]}),Object(b.jsx)("div",{children:K.memory})]})]})}),Object(b.jsx)("div",{className:Ze.a.row__average__block,children:Object(b.jsxs)("div",{className:"".concat(Ze.a.row),children:[Object(b.jsxs)("div",{className:Ze.a.row__average__block50,children:[Object(b.jsxs)("div",{children:[y("disk")," (GB)"]}),Object(b.jsx)("div",{children:K.storage})]}),Object(b.jsxs)("div",{className:Ze.a.row__average__block50,children:[Object(b.jsx)("div",{children:y("GPU")}),Object(b.jsx)("div",{children:K.gpu&&Object.entries(K.gpu).map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return Object(b.jsxs)("div",{children:[a," ( ",n," )"]},n)}))})]})]})}),Object(b.jsx)("div",{className:Ze.a.row__average__block})]})})]}),Object(b.jsx)("div",{className:"".concat(Ze.a.row," ").concat(Ze.a.marginTop10),children:Object(b.jsx)("div",{className:Ze.a.row__average,children:Object(b.jsx)("div",{className:Ze.a.row__average__block,children:Object(b.jsx)(ge,{className:Object(g.G)({width:"100%"}),label:"".concat(y("schedule")).concat(y("enSpace")).concat(y("name")),name:"name",onChange:function(e,t){return ve(t)},onGetErrorMessage:function(e){return lt(e)},required:!0,type:"text",validateOnLoad:!1,value:xe})})})}),Object(b.jsx)("div",{className:"".concat(Ze.a.row," ").concat(Ze.a.marginTop10),children:Object(b.jsx)(Ce,{onChange:function(e,t){return O(t.key)},options:[{key:!0,text:"".concat(y("reserve")).concat(y("enSpace")).concat(y("job"))},{key:!1,text:"".concat(y("reserve")).concat(y("enSpace")).concat(y("resource"))}],selectedKey:_,styles:{flexContainer:{display:"flex"},root:{selectors:{"& .ms-ChoiceField":{paddingRight:"20px",marginTop:"0px"},"& .ms-ChoiceField-field":{marginBottom:"0px",fontWeight:"400"}}}}})}),_&&Object(b.jsx)("div",{className:Ze.a.row,children:Object(b.jsxs)("div",{className:Ze.a.row__average,children:[Object(b.jsx)("div",{className:"".concat(Ze.a.row__average__block," ").concat(Ze.a.row),children:Object(b.jsx)(ge,{className:Object(g.G)({width:"100%"}),label:"".concat(y("job")).concat(y("enSpace")).concat(y("name")),name:"jobname",onChange:function(e,t){return ue(t)},required:!0,type:"text",value:de})}),Object(b.jsx)("div",{className:"".concat(Ze.a.row__average__block," ").concat(Ze.a.row),children:Object(b.jsx)(Ke,{min:0,onChange:function(e){return Se(e)},title:"".concat(y("retryCount"),"(").concat(y("optional"),")"),value:we})}),Object(b.jsx)("div",{className:"".concat(Ze.a.row__average__block," ").concat(Ze.a.row)})]})}),Object(b.jsx)("div",{className:"".concat(Ze.a.row),children:Object(b.jsxs)("div",{className:Ze.a.row__average,children:[Object(b.jsx)("div",{className:Ze.a.row__average__block,children:Object(b.jsx)(Ve,{FormHelperTextProps:{classes:st},helperText:ne,invalidDateMessage:y("dateInValid"),isRequired:!0,minDate:l.startAt,onChange:function(e){return Ie(e)},onError:function(e){ae(e||"")},title:y("selectastartdate"),value:Be})}),Object(b.jsx)("div",{className:Ze.a.row__average__block,children:Object(b.jsx)(Ve,{FormHelperTextProps:{classes:st},helperText:oe,invalidDateMessage:y("dateInValid"),isRequired:!0,minDate:Be,minDateMessage:y("DateShouldNotOverStartDay"),onChange:function(e){return Pe(e)},onError:function(e){ie(e||(D()(Ae).valueOf()-D()(Be).valueOf()<=0?y("DateShouldNotOverStartDay"):""))},title:y("selectaenddate"),value:Ae})}),Object(b.jsx)("div",{className:Ze.a.row__average__block})]})}),!_&&Object(b.jsx)("div",{className:"".concat(Ze.a.row," ").concat(!u&&Ze.a.paddingBottom72),children:Object(b.jsxs)("div",{className:Ze.a.row__average,children:[Object(b.jsxs)("div",{className:"".concat(Ze.a.row__average__block," ").concat(Ze.a.row),children:[Object(b.jsx)(Ke,{errorMessage:Fe>V.cpu?y("mustInputAvailableCpu"):"",max:!1===K.enabled||null===K.cpu?V.cpu:K.cpu,min:0,onChange:function(e){return Ge(e)},style:{width:"60%"},title:y("CPU"),value:Fe}),Object(b.jsx)("div",{className:Ze.a.row__right,children:Object(b.jsx)("div",{className:Ze.a.row__right__block,children:V.cpu?"/ "+V.cpu:"/ -"})})]}),Object(b.jsxs)("div",{className:"".concat(Ze.a.row__average__block," ").concat(Ze.a.row),children:[Object(b.jsx)(Ke,{errorMessage:He>V.memory?y("mustInputAvailableMemory"):"",max:!1===K.enabled||null===K.memory?V.memory:K.memory,min:512,onChange:function(e){return We(e)},style:{width:"60%"},title:"".concat(y("memorySize")," (MB)"),value:He}),Object(b.jsx)("div",{className:Ze.a.row__right,children:Object(b.jsx)("div",{className:Ze.a.row__right__block,children:V.memory?"/ "+V.memory:"/ -"})})]}),Object(b.jsxs)("div",{className:"".concat(Ze.a.row__average__block," ").concat(Ze.a.row),children:[Object(b.jsx)(Ke,{errorMessage:Xe>V.storage?y("mustInputAvailableStorage"):"",max:!1===K.enabled||null===K.storage?V.storage:K.storage,min:0,onChange:function(e){return Qe(e)},style:{width:"60%"},title:"".concat(y("disk")).concat(y("enSpace")).concat(y("size")," (GB)"),value:Xe}),Object(b.jsx)("div",{className:Ze.a.row__right,children:Object(b.jsx)("div",{className:Ze.a.row__right__block,children:V.storage?"/ "+V.storage+" GB":"/ - GB"})})]})]})}),u&&Object(b.jsx)("div",{className:"".concat(Ze.a.row," ").concat(Ze.a.paddingBottom72),children:Object(b.jsxs)("div",{className:Ze.a.row__average,children:[Object(b.jsx)("div",{className:Ze.a.row__average__block,children:Object(b.jsx)(Ne,{ariaLabel:"".concat(y("Select")).concat(y("enSpace")).concat(y("GPU")),label:"".concat(y("Select")).concat(y("enSpace")).concat(y("GPU")),onChange:function(e,t){return M("select"!==t.key?t.text:"")},options:(t=Y,n={key:"select",text:"".concat(y("select")).concat(y("enSpace")).concat(y("type"))},void 0!==n?[n].concat(Object(Oe.a)(t)).map((function(e,t){return Object(a.a)({key:t,text:e.name},e)})):t.map((function(e,t){return Object(a.a)({key:t,text:e.name},e)}))),placeholder:"".concat(y("Select")).concat(y("enSpace")).concat(y("GPU")),selectedKey:C})}),!_&&Object(b.jsxs)("div",{className:"".concat(Ze.a.row__average__block," ").concat(Ze.a.row),children:[Object(b.jsx)(ge,{className:Object(g.G)({width:"60%"}),label:"".concat(y("GPU")).concat(y("enSpace")).concat(y("amount")),name:"gpuAmount",onChange:function(e,t){""!==C&&at(Object(U.a)({},C,t))},required:!0,type:"text",value:nt[C]||0}),Object(b.jsx)("div",{className:Ze.a.row__right,children:Object(b.jsx)("div",{className:Ze.a.row__right__block,children:""===C||Object(A.isEmpty)(V)?"/ -":"/ ".concat(V.gpu[C])})})]}),Object(b.jsx)("div",{className:Ze.a.row__average__block})]})}),Object(b.jsxs)("div",{className:"".concat(Ze.a.width100," ").concat(Ze.a.footer),children:[Object(b.jsx)(N,{onClick:function(){return h()},text:y("cancel")}),Object(b.jsx)(x,{disabled:!ot,onClick:function(){var e={user:void 0===me?k.username:me,name:xe,virtualGroup:d,cpu:Fe,gpu:""!==C?nt:{},memory:He,storage:Xe,startAt:Be,endAt:Ae,jobName:de,retryCount:we,gpuType:C};_?(s((function(t){return Object(a.a)(Object(a.a)({},t),e)})),f((function(e){return o?e+2:e+1}))):dt(new qe({modify:!!o,step1State:e,userInfo:k}))},text:y(_?"Next":"submit")})]})]})},Xe=function(){function e(t){Object($.a)(this,e);var n=t.minFailedInstances,a=t.minSucceededInstances;this.minFailedInstances=void 0===n?1:n,this.minSucceededInstances=void 0===a?1:a}return Object(X.a)(e,[{key:"convertToProtocolFormat",value:function(){return{minFailedInstances:this.minFailedInstances,minSucceededInstances:this.minSucceededInstances}}}],[{key:"fromProtocol",value:function(t){return Object(A.isNil)(t)?new e({}):new e(t)}}]),e}(),Qe=n(345),et=n(961),tt=n(353),nt=n(662),at=n(661),ct=n(809),rt=n.n(ct);var ot=function(e){var t=e.isOpen,n=e.onClose,a=e.viewTemplate,o=Object(i.a)().t,s=Object(r.useState)(""),l=Object(c.a)(s,2),d=l[0],u=l[1],j=Object(r.useState)([]),m=Object(c.a)(j,2),p=m[0],_=m[1],O=Object(r.useState)(),f=Object(c.a)(O,2),h=f[0],x=f[1],v=Object(r.useState)([]),y=Object(c.a)(v,2),k=y[0],w=y[1],N=Object(r.useState)([]),S=Object(c.a)(N,2),C=S[0],R=S[1];return Object(r.useEffect)((function(){void 0!==a.jobConfig&&(_(a.jobConfig.taskRoles),w(a.jobConfig.extras.nfsList),R(a.jobConfig.extras.glusterfsList),u(a.jobConfig.taskRoles[0].name))}),[a]),Object(r.useEffect)((function(){x(p.find((function(e){return e.name===d})))}),[d]),Object(b.jsxs)(tt.a,{isOpen:t,styles:{main:{overflowY:""},scrollableContent:{overflowY:""}},title:a.description?"".concat(o("view")).concat(o("enSpace")).concat(o("template")):"".concat(o("view")).concat(o("enSpace")).concat(o("job")),children:[Object(b.jsxs)("div",{className:rt.a.container,children:[a.description&&Object(b.jsx)("div",{className:rt.a.top,children:Object(b.jsxs)("div",{className:"".concat(rt.a.top__block," ").concat(rt.a.top__borderBottom," ").concat(rt.a.paddingBottom10),children:[Object(b.jsxs)("div",{className:rt.a.top__block__item__title,children:[Object(b.jsx)("div",{className:rt.a.top__block__item__25,children:o("Creator")}),Object(b.jsx)("div",{className:rt.a.top__block__item__25,children:o("description")})]}),Object(b.jsxs)("div",{className:rt.a.top__block__item,children:[Object(b.jsx)("div",{className:rt.a.top__block__item__25,children:a.owner}),Object(b.jsx)("div",{className:rt.a.top__block__item__25,children:a.description})]})]})}),Object(b.jsxs)("div",{className:rt.a.wrapper,style:null===a.description?{position:"absolute",top:"0"}:{},children:[Object(b.jsxs)("div",{className:"".concat(rt.a.wrapper__block," ").concat(rt.a.block__borderBottom," ").concat(rt.a.wrapper__borderBottom," ").concat(rt.a.marginTop10," ").concat(rt.a.paddingBottom10),children:[Object(b.jsxs)("div",{className:rt.a.wrapper__block__title,children:[Object(b.jsx)("div",{className:rt.a.block__title__25,children:o("virtualCluster")}),Object(b.jsx)("div",{className:rt.a.block__title__25,children:o("GPU")}),Object(b.jsx)("div",{className:rt.a.block__title__25,children:o("retryCount")})]}),Object(b.jsxs)("div",{className:rt.a.wrapper__block__item,children:[Object(b.jsx)("div",{className:rt.a.block__item__25,children:void 0!==a.jobConfig?a.jobConfig.extras.virtualGroup:"-"}),Object(b.jsx)("div",{className:rt.a.block__item__25,children:void 0!==a.jobConfig?a.jobConfig.gpuType:"-"}),Object(b.jsx)("div",{className:rt.a.block__item__25,children:void 0!==a.jobConfig?a.jobConfig.retryCount:"-"})]})]}),void 0!==h&&function(e){if(!Object(A.isEmpty)(e))return Object(b.jsxs)("div",{className:"".concat(rt.a.wrapper__block," ").concat(rt.a.block__borderBottom," ").concat(rt.a.wrapper__borderBottom," ").concat(rt.a.marginTop10," ").concat(rt.a.paddingBottom10),children:[Object(b.jsxs)("div",{className:rt.a.wrapper__block__title,children:[Object(b.jsx)("div",{className:rt.a.block__title__25,children:o("NFS")}),Object(b.jsx)("div",{className:rt.a.block__title__25,children:o("mountPoint")})]}),e.map((function(e){return Object(b.jsxs)("div",{className:rt.a.wrapper__block__item,children:[Object(b.jsx)("div",{className:rt.a.block__item__25,children:e.name}),Object(b.jsx)("div",{className:rt.a.block__item__25,children:e.mountPoint})]})}))]})}(k),void 0!==h&&function(e){if(!Object(A.isEmpty)(e))return Object(b.jsxs)("div",{className:"".concat(rt.a.wrapper__block," ").concat(rt.a.block__borderBottom," ").concat(rt.a.wrapper__borderBottom," ").concat(rt.a.marginTop10," ").concat(rt.a.paddingBottom10),children:[Object(b.jsxs)("div",{className:rt.a.wrapper__block__title,children:[Object(b.jsx)("div",{className:rt.a.block__title__25,children:o("glusterfs")}),Object(b.jsx)("div",{className:rt.a.block__title__25,children:o("volumeGlusterFS")})]}),e.map((function(e){return Object(b.jsxs)("div",{className:rt.a.wrapper__block__item,children:[Object(b.jsx)("div",{className:rt.a.block__item__25,children:e.name}),Object(b.jsx)("div",{className:rt.a.block__item__25,children:e.mountPoint})]})}))]})}(C),Object(b.jsxs)("div",{className:"".concat(rt.a.wrapper__block," ").concat(rt.a.block__borderBottom," ").concat(rt.a.wrapper__borderBottom," ").concat(rt.a.marginTop10," ").concat(rt.a.paddingBottom10),children:[Object(b.jsxs)("div",{className:rt.a.wrapper__block__title,children:[Object(b.jsx)("div",{className:rt.a.block__title__25,children:o("keyword")}),Object(b.jsx)("div",{className:rt.a.block__title__25,children:o("Value")})]}),Object(b.jsxs)("div",{className:rt.a.wrapper__block__item,children:[Object(b.jsx)("div",{className:rt.a.block__item__25,children:void 0!==h&&void 0!==a.jobConfig?"-":Object.keys(a.jobConfig.jobEnvs)[0]}),Object(b.jsx)("div",{className:rt.a.block__item__25,children:void 0!==h&&void 0!==a.jobConfig?"-":Object.values(a.jobConfig.jobEnvs)[0]})]})]}),Object(b.jsx)(at.a,{onLinkClick:function(e){u(e.props.itemKey)},withBorder:!1,children:p.map((function(e){return Object(b.jsx)(nt.a,{headerText:e.name,itemKey:e.name},e.name)}))}),Object(b.jsxs)("div",{className:"".concat(rt.a.wrapper__block," ").concat(rt.a.marginTop10," ").concat(rt.a.paddingBottom10," ").concat(rt.a.wrapper__borderBottom),children:[Object(b.jsx)("div",{className:rt.a.wrapper__block__title,children:Object(b.jsx)("div",{className:rt.a.block__title__25,children:o("command")})}),Object(b.jsx)("div",{className:rt.a.wrapper__block__command,children:void 0!==h&&h.command.split("\n").map((function(e){return Object(b.jsx)("div",{children:e})}))})]}),Object(b.jsxs)("div",{className:"".concat(rt.a.wrapper__block," ").concat(rt.a.marginTop10," ").concat(rt.a.paddingBottom10," ").concat(rt.a.wrapper__borderBottom),children:[Object(b.jsxs)("div",{className:rt.a.wrapper__block__title,children:[Object(b.jsx)("div",{className:rt.a.block__title__20,children:o("taskInstance")}),Object(b.jsx)("div",{className:rt.a.block__title__50,children:o("dockerMirrors")})]}),Object(b.jsxs)("div",{className:rt.a.wrapper__block__item,children:[Object(b.jsx)("div",{className:rt.a.block__item__20,children:void 0!==h&&h.taskNumber}),void 0!==h&&h.dockerImage&&h.dockerImage.uri]})]}),Object(b.jsxs)("div",{className:"".concat(rt.a.wrapper__block," ").concat(rt.a.marginTop10," ").concat(rt.a.paddingBottom10," ").concat(rt.a.wrapper__borderBottom),children:[Object(b.jsxs)("div",{className:rt.a.wrapper__block__title,children:[Object(b.jsx)("div",{className:rt.a.block__title__20,children:o("CPU")}),Object(b.jsxs)("div",{className:rt.a.block__title__20,children:[o("memory")," (MB)"]}),Object(b.jsx)("div",{className:rt.a.block__title__20,children:o("sharedMemoryMB")}),Object(b.jsx)("div",{className:rt.a.block__title__20,children:o("disk")}),Object(b.jsx)("div",{className:rt.a.block__title__20,children:o("GPU")})]}),Object(b.jsxs)("div",{className:rt.a.wrapper__block__item,children:[Object(b.jsx)("div",{className:rt.a.block__item__20,children:void 0!==h&&h.cpuNumber}),Object(b.jsx)("div",{className:rt.a.block__item__20,children:void 0!==h&&h.memoryMB}),Object(b.jsx)("div",{className:rt.a.block__item__20,children:void 0!==h&&h.shmMB}),Object(b.jsx)("div",{className:rt.a.block__item__20,children:void 0!==h&&h.storageGB}),Object(b.jsx)("div",{className:rt.a.block__item__20,children:void 0!==h&&h.gpuNumber})]})]}),void 0!==h&&void 0!==h.portList&&function(e){if(void 0!==e)return Object(b.jsxs)("div",{className:"".concat(rt.a.wrapper__block," ").concat(rt.a.marginTop10," ").concat(rt.a.paddingBottom10," ").concat(rt.a.wrapper__borderBottom),children:[Object(b.jsxs)("div",{className:rt.a.wrapper__block__title,children:[Object(b.jsx)("div",{className:rt.a.block__title__20,children:o("portName")}),Object(b.jsx)("div",{className:rt.a.block__title__20,children:o("portNumber")})]}),e.map((function(e){return Object(b.jsxs)("div",{className:rt.a.wrapper__block__item,children:[Object(b.jsx)("div",{className:rt.a.block__item__20,children:e.label}),Object(b.jsx)("div",{className:rt.a.block__item__20,children:e.beginAt})]})}))]})}(h.portList),Object(b.jsxs)("div",{className:"".concat(rt.a.wrapper__block," ").concat(rt.a.marginTop10," ").concat(rt.a.paddingBottom10," ").concat(rt.a.wrapper__borderBottom),children:[Object(b.jsxs)("div",{className:rt.a.wrapper__block__title,children:[Object(b.jsxs)("div",{className:rt.a.block__title__50,children:[o("conditionsOfCompletion"),": ",o("minimumCountOfFailedInstances")]}),Object(b.jsxs)("div",{className:rt.a.block__title__50,children:[o("conditionsOfCompletion"),": ",o("minimumCountOfSuccessfulInstances")]})]}),Object(b.jsxs)("div",{className:rt.a.wrapper__block__item,children:[Object(b.jsx)("div",{className:rt.a.block__item__50,children:void 0!==h&&h.minFailedTaskCount}),Object(b.jsx)("div",{className:rt.a.block__item__50,children:void 0!==h&&h.minSucceededTaskCount})]})]})]})]}),Object(b.jsx)(M.a,{horizontal:!0,horizontalAlign:"flex-end",children:Object(b.jsx)(Qe.a,{className:Object(g.G)({marginRight:10}),onClick:function(){n(),u("")},text:o("close")})})]})},it=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Object($.a)(this,e),this.keyword=t,this.owner=n,this.username=a}return Object(X.a)(e,[{key:"apply",value:function(e){var t=this.keyword,n=this.owner,a=[];return""!==t&&a.push((function(e){var n=e.name,a=e.description;return n.includes(t)||a.includes(t)})),n.size>0&&a.push((function(e){return n.has(e.owner)})),0===a.length?e:e.filter((function(e){return a.every((function(t){return t(e)}))}))}}]),e}(),st=it,lt=n(811),dt=n.n(lt),ut=function(e){var t=e.setStep2State,n=e.step2State,o=Object(i.a)().t,s=Object(r.useContext)(_e),l=s.userInfo,d=s.activeStep,u=Object(r.useState)([]),j=Object(c.a)(u,2),m=j[0],p=j[1],_=Object(r.useState)(null),O=Object(c.a)(_,2),f=O[0],h=O[1],x=Object(r.useState)(!1),v=Object(c.a)(x,2),y=v[0],k=v[1],w=Object(r.useState)({}),N=Object(c.a)(w,2),S=N[0],C=N[1],M=Object(r.useState)(""),R=Object(c.a)(M,2),B=R[0],I=R[1],T=Object(r.useState)(new st),E=Object(c.a)(T,2),P=E[0],D=E[1],V=Object(r.useState)(P.owner),G=Object(c.a)(V,2),L=G[0],U=G[1],H=Object(r.useMemo)((function(){var e=Object.create(null);return m&&m.forEach((function(t){e[t.owner]=!0})),{users:e}}),[m]),W=H.users,K={root:{selectors:{"& .ms-ChoiceField-field":{fontWeight:"400"}}}};return Object(r.useEffect)((function(){1===d&&("true"===l.admin?Object(F.Y)():Object(F.D)(l.username)).then((function(e){return p(e)})).catch((function(e){return z.b.error(e.message?e.data.message:e.message)}))}),[d]),Object(r.useEffect)((function(){Object(A.isEmpty)(n.templateInfo)||h(n.templateInfo.id)}),[n]),Object(r.useEffect)((function(){D(new st(B,L))}),[B,L]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:dt.a.searchBlock,children:[Object(b.jsxs)("div",{children:[o("select"),o("enSpace"),o("template")]}),Object(b.jsxs)("div",{className:dt.a.searchBlockRight,children:[Object(b.jsx)(he,{className:Object(g.G)({marginRight:10}),iconProps:{iconName:"Search"},onChange:function(e){return I(e)},placeholder:"".concat(o("search"))}),Object(b.jsx)(Ne,{multiSelect:!0,onChange:function(e,t){if("user"===t.type){var n=new Set(L);t.selected?n.add(t.key.split("user-")[1]):n.delete(t.key.split("user-")[1]),U(n)}},options:function(){var e=[];return void 0!==m&&e.push({key:"user-"+l.username,text:"@".concat(o("self")),type:"user"}),e.push.apply(e,Object(Oe.a)(Object.keys(W).filter((function(e){return e!==l.username})).map((function(e){return{key:"user-"+e,text:e,type:"user"}})))),[{key:"creator",name:o("Creator"),type:"-",itemType:et.a.Header}].concat(e,[{key:"divider_2",name:"divider_2",text:"-",itemType:et.a.Divider},{key:"clear",name:o("clearOption"),type:"clear",itemType:et.a.Header}]).map((function(e){return Object(a.a)({key:e.key,text:e.name},e)}))}(),placeholder:o("filter")})]})]}),Object(b.jsx)("div",{className:"".concat(dt.a.container," ").concat(dt.a.marginTop10),children:!Object(A.isEmpty)(m)&&P.apply(m).map((function(e){var c=e.id,r=e.name,i=e.owner,s=e.description;return Object(b.jsxs)("div",{className:dt.a.row,children:[Object(b.jsxs)("div",{className:"".concat(dt.a.template," ").concat(dt.a.marginLeft10),children:[Object(b.jsx)("div",{children:Object(b.jsx)(Ce,{onChange:function(n,c){h(c.key),t((function(t){return Object(a.a)(Object(a.a)({},t),{},{templateInfo:e,isModify:l.username!==i})}))},options:[{key:c,text:r}],selectedKey:!Object(A.isEmpty)(n.templateInfo)&&n.templateInfo.id,styles:K})}),Object(b.jsxs)("div",{className:"".concat(dt.a.marginLeft25," ").concat(dt.a.line),children:[o("owner"),": ",i]}),Object(b.jsxs)("div",{className:"".concat(dt.a.marginLeft25," ").concat(dt.a.line),children:[o("description"),": ",s]}),f===c&&l.username===i&&Object(b.jsx)(ke,{checked:n.isModify,className:"".concat(dt.a.marginLeft25," ").concat(dt.a.line),label:"".concat(o("modify")).concat(o("enSpace")).concat(o("configuration")),onChange:function(e,n){t((function(e){return Object(a.a)(Object(a.a)({},e),{},{isModify:n})}))}})]}),Object(b.jsx)("div",{className:dt.a.view,children:Object(b.jsx)(Qe.b,{iconProps:{iconName:"View"},onClick:function(){!function(e){C(e),k(!0)}(e)},styles:{root:{width:"10%",marginTop:"2px"}}})})]},c)}))}),y&&Object(b.jsx)(ot,{isOpen:y,onClose:function(){C({}),k(!1)},viewTemplate:S})]})},bt=function(e){var t=e.step2State,n=e.setStep2State,o=e.setActiveStep,s=e.resetDefault,l=e.setJobTaskRoles,d=Object(i.a)().t,u=Object(r.useState)(!1),j=Object(c.a)(u,2),m=j[0],p=j[1];Object(r.useEffect)((function(){var e=t.selectedKey,n=t.templateInfo;if(0===e)p(!0);else if(1!==e||Object(A.isEmpty)(n))p(!1);else{var a=n.jobConfig.taskRoles,c=a&&a.map&&a.map((function(e){var t=e.name,n=e.dockerImage,a=e.taskNumber,c=e.cpuNumber,r=e.shmMB,o=e.minFailedTaskCount,i=e.minSucceededTaskCount,s=e.command,l=e.portList,d=e.storageGB,u=e.memoryMB,b=e.gpuNumber;return new be({name:t,dockerInfo:new ie(n),instances:a,ports:l&&l.map((function(e){return{key:e.label,value:e.beginAt}})),commands:s,completion:new Xe({minFailedInstances:o,minSucceededInstances:i}),containerSize:{gpu:b,cpu:c,storageGB:d,memoryMB:u},shmMB:r})}));c.length>0?(l(c),p(!0)):(z.b.error(d("isNotEnough",{name:d("taskCount")})),p(!1))}}),[t]);var _={root:{selectors:{"& .ms-ChoiceField-field":{fontWeight:"400"}}}};return Object(b.jsxs)("div",{style:{height:"480px",paddingBottom:"72px"},children:[Object(b.jsx)(Ce,{onChange:function(e,t){n((function(e){return Object(a.a)(Object(a.a)({},e),{},{selectedKey:t.key,isModify:!0})}))},options:[{key:0,text:d("Custom")}],selectedKey:t.selectedKey,styles:_}),Object(b.jsx)(Ce,{onChange:function(e,t){n((function(e){return Object(a.a)(Object(a.a)({},e),{},{selectedKey:t.key,isModify:!0})}))},options:[{key:1,text:"".concat(d("Template"))}],selectedKey:t.selectedKey,styles:_}),1===t.selectedKey&&Object(b.jsx)(ut,{setStep2State:n,step2State:t}),Object(b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",position:"absolute",bottom:"0",left:0,padding:"20px",width:"100%",backgroundColor:"#fff"},children:[Object(b.jsx)(N,{onClick:function(){return s()},text:d("cancel")}),Object(b.jsxs)("div",{children:[Object(b.jsx)(N,{onClick:function(){return o((function(e){return e-1}))},text:d("Back")}),Object(b.jsx)(x,{className:Object(g.G)({marginLeft:"10px"}),disabled:!m,onClick:function(){return o((function(e){return e+1}))},text:d("Next")})]})]})]})},jt=n(605),mt=n.n(jt),pt=n(903),_t=n(472),Ot=n.n(_t),ft=Ot.a.object().keys({name:Ot.a.string().required(),completion:Ot.a.object().keys({minFailedInstances:Ot.a.number().integer().min(0).allow(null),minSucceededInstances:Ot.a.number().integer().min(0).allow(null)}),dockerInfo:Ot.a.object().keys({uri:Ot.a.string().required()}).unknown(!0),containerSize:Ot.a.object().keys({cpu:Ot.a.number().integer().min(1),gpu:Ot.a.number().integer().min(0),memoryMB:Ot.a.number().integer().min(1),storageGB:Ot.a.number().integer().min(1)}),deployment:Ot.a.object().unknown(!0),isContainerSizeEnabled:Ot.a.boolean(),instances:Ot.a.number().integer().min(1),shmMB:Ot.a.number().max(Ot.a.ref("containerSize.memoryMB")).min(0).default(64),commands:Ot.a.string(),ports:Ot.a.array().items(Ot.a.object()).allow(null),taskRetryCount:Ot.a.number().integer().min(0)}),ht=Ot.a.array().items(ft),xt=n(513),gt=n.n(xt),vt=["title","hint","customButton","onChange","containerClass"],yt=function(e){var t=e.title,n=e.hint,c=e.customButton,r=e.onChange,i=e.containerClass,s=Object(_.a)(e,vt),l=Object(A.debounce)(r,50);return Object(b.jsxs)("div",{className:"".concat(gt.a.container),children:[Object(b.jsxs)("div",{className:gt.a.title,children:[Object(b.jsx)("label",{children:t}),n&&Object(b.jsx)(Ue.a,{calloutProps:{isBeakVisible:!1,directionalHint:He.a.topAutoEdge,gapSpace:8},content:n,tooltipProps:o.a.isValidElement(n)?{onRenderContent:function(){return n}}:{},children:Object(b.jsx)(T.a,{iconName:"Info",styles:{root:{verticalAlign:"middle",cursor:"pointer",margin:"0 5px"}}})})]}),Object(b.jsxs)("div",{className:Object(g.G)(Object(a.a)({position:"relative"},i)),children:[Object(b.jsx)(ge,Object(a.a)({onChange:l},s)),c]})]})},kt=["title","hint","fieldError","onChange","onIncrement","onDecrement","onValidate","min","max","errorMessage"],wt=function(e){var t=e.title,n=e.hint,c=e.fieldError,i=e.onChange,s=e.onIncrement,l=e.onDecrement,d=e.onValidate,u=e.min,j=e.max,m=e.errorMessage,p=Object(_.a)(e,kt),O=Object(r.useCallback)((function(e,t,n){var a=n;return Object(A.isNil)(u)||(a=Math.max(u,a)),Object(A.isNil)(j)||(a=Math.min(j,a)),void 0!==t&&(a=t(e)),void 0===i?a:i(a)}),[i]);return Object(b.jsxs)("div",{className:gt.a.container,children:[Object(b.jsxs)("div",{className:gt.a.title,children:[Object(b.jsx)("label",{children:t}),n&&Object(b.jsx)(Ue.a,{calloutProps:{isBeakVisible:!1,directionalHint:He.a.topAutoEdge,gapSpace:8},content:n,tooltipProps:o.a.isValidElement(n)?{onRenderContent:function(){return n}}:{},children:Object(b.jsx)(T.a,{iconName:"Info",styles:{root:{verticalAlign:"middle",cursor:"pointer",margin:"0 5px"}}})})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)(Me.a,Object(a.a)(Object(a.a)({},p),{},{min:0,onDecrement:Object(A.debounce)((function(e){return O(e,l,+e-1)}),10),onIncrement:Object(A.debounce)((function(e){return O(e,s,+e+1)}),10),onValidate:Object(A.debounce)((function(e){return O(e,d,e)}),10),step:1,styles:{root:{border:c?"rgb(168,0,0) 1px solid":"",borderRadius:3,width:"100%"},spinButtonWrapper:{borderRadius:3,paddingRight:10,border:c?"none":"1px solid #A19F9D"}}})),m&&Object(b.jsx)("span",{style:{fontSize:12,color:"rgb(168, 0, 0)"},children:m})]})]})},Nt=n(905),St=n(559),Ct=n(511),Mt=function(e){var t=e.value,n=e.onChange,c=e.label,o=e.placeholder,i=e.completionItems,s=e.monacoProps,l=e.monacoRef,d=e.errorMessage,u=Object(g.B)(),j=u.palette,m=u.spacing,p=u.semanticColors,_=Object(A.isEmpty)(d)?j.neutralTertiary:p.errorText,O=Object(a.a)({},s),f=O.editorDidMount;delete O.editorDidMount;var h=Object(r.useCallback)((function(e,t){e.onDidFocusEditorText((function(){e.getValue()===o&&e.setValue("")})),e.onDidBlurEditorText((function(){var t=e.getValue();Object(A.isEmpty)(t)&&!Object(A.isEmpty)(o)&&e.setValue(o)}));var n=e.getValue();Object(A.isEmpty)(n)&&!Object(A.isEmpty)(o)&&e.setValue(o),Object(A.isNil)(f)||f(e,t)}),[f]);return Object(b.jsxs)("div",{children:[!Object(A.isNil)(c)&&Object(b.jsx)(Nt.a,{children:c}),Object(b.jsx)(Ct.a,{completionItems:i,monacoProps:Object(a.a)({theme:"vs",language:"plaintext",options:{automaticLayout:!0,wordWrap:"on",readOnly:!1,defaultEOL:1,minimap:{enabled:!1}},value:t,onChange:n,editorDidMount:h},O),monacoRef:l,style:{flex:"1 1 100%",minHeight:0,border:"solid 1px",borderColor:_,paddingTop:m.s1}}),!Object(A.isEmpty)(d)&&Object(b.jsx)("div",{role:"alert",children:Object(b.jsx)(St.a,{children:Object(b.jsx)("p",{className:g.a.slideDownIn20,style:{fontSize:g.f.small,color:p.errorText,margin:0,paddingTop:m.s2,display:"flex",alignItems:"center"},children:Object(b.jsx)("span",{"data-automation-id":"error-message",children:d})})})})]})},Rt=["title","hint","value","defaultValue"],Bt=o.a.memo((function(e){var t=e.title,n=e.hint,c=e.value,r=e.defaultValue,s=Object(_.a)(e,Rt),l=Object(i.a)().t;return Object(b.jsxs)("div",{className:gt.a.container,children:[Object(b.jsxs)("div",{className:gt.a.title,children:[Object(b.jsx)("label",{children:t}),n&&Object(b.jsx)(Ue.a,{calloutProps:{isBeakVisible:!1,directionalHint:He.a.topAutoEdge,gapSpace:8},content:n,tooltipProps:o.a.isValidElement(n)?{onRenderContent:function(){return n}}:{},children:Object(b.jsx)(T.a,{iconName:"Info",styles:{root:{verticalAlign:"middle",cursor:"pointer",margin:"0 5px"}}})})]}),Object(b.jsx)("div",{className:gt.a.input,children:Object(b.jsx)(Mt,Object(a.a)({completionItems:Object(Oe.a)(ae.map((function(e){return e.key}))),errorMessage:Object(A.isEmpty)(c)?l("commandCannotBeEmpty"):null,monacoProps:{height:150,language:"shell",defaultValue:r},value:c.replaceAll(" && ","\n")},s))})]})})),It=function(e){var t=e.data,n=e.onChange,o=Object(i.a)().t,s=Object(r.useState)([]),l=Object(c.a)(s,2),d=l[0],u=l[1],j=Object(r.useState)(),m=Object(c.a)(j,2),p=m[0],_=m[1],O=Object(r.useState)(""),f=Object(c.a)(O,2),h=f[0],x=f[1],y=Object(r.useState)(""),k=Object(c.a)(y,2),w=k[0],N=k[1],S=Object(r.useRef)(""),C=Object(r.useCallback)((function(e,c){var r=new ie(Object(a.a)(Object(a.a)({},t),{},Object(U.a)({},e,c)));n("dockerInfo",r)}),[n]);Object(r.useEffect)((function(){S.current=C}),[C]);var M=function(){var e=Object(te.a)(ee.a.mark((function e(t,n){var a;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(F.Q)(n);case 3:if(a=e.sent,void 0!==t){e.next=8;break}return e.abrupt("return","");case 8:if(""!==t){e.next=12;break}return e.abrupt("return","".concat(o("tag")).concat(o("enSpace")).concat(o("error")));case 12:return e.abrupt("return",a.find((function(e){return e.tag===t}))?"":o("dockerMirrorsPathError"));case 13:e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(0),e.abrupt("return",o("dockerMirrorsPathError"));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}(),R=Object(r.useCallback)(Object(A.debounce)(function(){var e=Object(te.a)(ee.a.mark((function e(t,n,a){var c,r,i,s,l,d;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(A.isEmpty)(t)){e.next=4;break}N(o("dockerMirrorsPathCannotBeEmpty")),e.next=25;break;case 4:if(3===(c=t.split("/")).length){e.next=7;break}return e.abrupt("return",N(""));case 7:if(c[0]===n){e.next=9;break}return e.abrupt("return",N(""));case 9:if(r=c[2].split(":")[0],i=c[2].split(":")[1],s=c[1]+"/"+r,l=a.find((function(e){return e===s}))){e.next=15;break}return e.abrupt("return",N(o("dockerMirrorsPathError")));case 15:return e.prev=15,e.next=18,M(i,l);case 18:d=e.sent,N(d),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(15),N("");case 25:case"end":return e.stop()}}),e,null,[[15,22]])})));return function(t,n,a){return e.apply(this,arguments)}}(),200),[N]);Object(r.useEffect)((function(){Object(F.P)().then((function(e){x(e.host),_(e.repositories),u(e.repositories.map((function(e){var t={};return t.key=e,t.text=e,t.componentRef=function(e){return t.data={ref:e}},t})))}))}),[]);var B=Object(r.useCallback)((function(e,t){e.preventDefault(),Object(F.Q)(t.text,!1).then((function(e){t.subMenuProps={items:e.map((function(e){return{key:e,text:e,onClick:function(e,n){S.current("uri","".concat(h,"/").concat(t.text,":").concat(n.text)),N("")}}}))},t.data.ref.openSubMenu()}))}),[h]);return Object(b.jsx)("div",{children:Object(b.jsx)("div",{className:mt.a.formContent,children:Object(b.jsx)(yt,{className:Object(g.G)({width:"100%",position:"relative"}),customButton:Object(b.jsx)(v.a,{menuProps:{directionalHint:He.a.rightCenterEdge,items:d,onItemClick:B},styles:{root:{background:"#fff",padding:0,width:30,minWidth:30,height:20,position:"absolute",right:10,top:5},rootHovered:{background:"#fff"}}}),errorMessage:R(t.uri,h,p)?w:"",onChange:function(e,t){R(t,h,p),C("uri",t)},placeholder:o("pleaseEnterDockerMirrorsPath"),title:o("dockerMirrors"),value:t.uri})})})},Tt=n(120),Et=n(635),At=n(745),Pt=n(452),Dt=n(698),zt=n(658),Ft=function(e){var t=e.onChange,n=e.value,o=Object(r.useState)(""),i=Object(c.a)(o,2),s=i[0],l=i[1];Object(r.useEffect)((function(){return l(n)}),[n]);var d=Object(r.useMemo)((function(){return Object(A.debounce)(t,200)}),[t]),u=Object(r.useCallback)((function(e,t){l(t),d(e,t)}),[l,d]);return Object(b.jsx)(xe.a,Object(a.a)(Object(a.a)({},e),{},{onChange:u,styles:{fieldGroup:{borderRadius:3}},value:s}))},Vt=function(e){var t=Object.assign({},e);return Object(b.jsx)(Et.a,Object(a.a)(Object(a.a)({},t),{},{onRenderColumnHeaderTooltip:function(e,t){return Object(b.jsx)("span",{style:{fontSize:"16px",fontWeight:"bold"},children:t(Object(a.a)({},e))})},styles:{root:{padding:"0"}}}))},Gt=function(e){var t=e.name,n=e.value,o=e.onChange,s=e.onError,l=e.keyName,d=e.keyField,u=e.valueName,j=e.valueField,m=e.secret,p=e.onValidateKey,_=e.onValidateValue;l=l||"Key",d=d||Object(A.camelCase)(l),u=u||"Value",j=j||Object(A.camelCase)(u);var O=Object(i.a)().t,f=Object(r.useState)([]),h=Object(c.a)(f,2),x=h[0],g=h[1];Object(r.useMemo)((function(){var e=n.reduce((function(e,t){return void 0===e[t[d]]&&(e[t[d]]=0),e[t[d]]+=1,e}),{}),a=n.filter((function(t){return e[t[d]]>1})).map((function(e){return e[d]})),c="";if(a.length>0&&(c="".concat(t||"KeyValueList"," has duplicated keys.")),n.some((function(e){return Object(A.isEmpty)(e[d])&&!Object(A.isEmpty)(e[j])}))&&(c="".concat(t||"KeyValueList"," has value with empty key.")),!Object(A.isNil)(p)||!Object(A.isNil)(_)){var r,o=Object(Tt.a)(n);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(!Object(A.isNil)(p)){var l=i[d],u=p(l);Object(A.isEmpty)(u)||(c=u)}if(!Object(A.isNil)(_)){var b=i[j],m=_(b);Object(A.isEmpty)(m)||(c=m)}}}catch(O){o.e(O)}finally{o.f()}}s&&s(c),g(a)}),[n]);var v=Object(r.useCallback)((function(){var e;o([].concat(Object(Oe.a)(n),[(e={},Object(U.a)(e,d,""),Object(U.a)(e,j,""),e)]))}),[o,n,d,j]),y=Object(r.useCallback)((function(e){o([].concat(Object(Oe.a)(n.slice(0,e)),Object(Oe.a)(n.slice(e+1))))}),[o,n]),k=Object(r.useCallback)((function(e,t){o([].concat(Object(Oe.a)(n.slice(0,e)),[Object(a.a)(Object(a.a)({},n[e]),{},Object(U.a)({},d,t))],Object(Oe.a)(n.slice(e+1))))}),[o,n,d]),w=Object(r.useCallback)((function(e,t){o([].concat(Object(Oe.a)(n.slice(0,e)),[Object(a.a)(Object(a.a)({},n[e]),{},Object(U.a)({},j,t))],Object(Oe.a)(n.slice(e+1))))}),[o,n,j]),N=Object(r.useCallback)((function(e,t){return t}),[]);Object(r.useLayoutEffect)((function(){re()}));var C=[{key:l,name:l,minWidth:300,onRender:function(e,t){var n=null;if(x.includes(e[d])&&(n=O("duplicateKeyword")),Object(A.isEmpty)(e[d])&&!Object(A.isEmpty)(e[j])&&(n=O("keywordCannotBeEmpty")),!Object(A.isNil)(p)){var a=p(e[d]);Object(A.isEmpty)(a)||(n=a)}return Object(b.jsx)(Ft,{errorMessage:n,onChange:function(e,n){return k(t,n)},value:e[d]})}},{key:u,name:u,minWidth:150,onRender:function(e,t){var n=null;if(!Object(A.isNil)(_)){var a=_(e[j]);Object(A.isEmpty)(a)||(n=a)}return Object(b.jsx)(Ft,{defaultValue:e[j],errorMessage:n,onChange:function(e,n){return w(t,n)},type:m&&"password",value:0===e[j]?"0":e[j]})}},{key:"remove",name:"".concat(O("delete")),minWidth:50,style:{padding:0},onRender:function(e,t){return Object(b.jsx)("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"center",height:"100%"},children:Object(b.jsx)(S.a,{iconProps:{iconName:"Delete"},onClick:function(){return y(t)}},"remove-button-".concat(t))})}}];return Object(b.jsxs)(M.a,{gap:"m",children:[Object(b.jsx)("div",{children:Object(b.jsx)(At.a,{checkboxVisibility:Pt.a.hidden,columns:C,compact:!0,getKey:N,items:n,layoutMode:Pt.e.fixedColumns,onRenderDetailsHeader:Vt,onRenderRow:function(e){return Object(b.jsx)(Dt.a,Object(a.a)({styles:{root:{fontSize:"14px",color:"#333",selectors:{"& .ms-TextField":{width:"100%",padding:"0 10px"},"& .ms-TextField-wrapper":{width:"100%"}}},cell:{display:"flex",alignItems:"center",padding:"10px 0"}}},e))},selectionMode:zt.b.none})}),Object(b.jsx)("div",{children:Object(b.jsx)(Qe.a,{iconProps:{iconName:"Add"},onClick:v,children:O("Add")})})]})},Lt=/^[a-zA-Z_][a-zA-Z0-9_]*$/,Ut=function(e){var t=e.onChange,n=e.ports,a=Object(i.a)().t;return Object(b.jsx)("div",{className:gt.a.container,children:Object(b.jsx)(Gt,{keyField:"key",keyName:a("portName"),name:"Port List",onChange:function(e){return t("ports",e)},onValidateKey:function(e){if(!Lt.test(e))return"".concat(a("stringFormatIs")," ^[a-zA-Z_][a-zA-Z0-9_]*$")},onValidateValue:function(e){var t=e;if("string"===typeof e&&(t=parseInt(e,10)),t<0||isNaN(t))return"".concat(a("fillInAnInteger"))},value:n,valueField:"value",valueName:a("portNumber")})})},Ht=function(e){var t=e.data,n=e.onChange,c=Object(i.a)().t;return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"".concat(mt.a.width100," ").concat(mt.a.paddingLeftRight10),children:Object(b.jsx)(Ut,{onChange:n,ports:t.ports})}),t.completion&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"".concat(mt.a.row," ").concat(mt.a.paddingLeftRight10," ").concat(mt.a.marginTop10),children:c("conditionsOfCompletion")}),Object(b.jsxs)("div",{className:mt.a.row,children:[Object(b.jsx)("div",{className:"".concat(mt.a.width50," ").concat(mt.a.paddingLeftRight10),children:Object(b.jsx)(wt,{min:0,onChange:function(e){return n("completion",Object(a.a)(Object(a.a)({},t.completion),{},{minFailedInstances:e}))},title:c("minimumCountOfFailedInstances"),value:t.completion.minFailedInstances})}),Object(b.jsx)("div",{className:"".concat(mt.a.width50," ").concat(mt.a.paddingLeftRight10),children:Object(b.jsx)(wt,{min:0,onChange:function(e){return n("completion",Object(a.a)(Object(a.a)({},t.completion),{},{minSucceededInstances:e}))},title:c("minimumCountOfSuccessfulInstances"),value:t.completion.minSucceededInstances})})]})]})]})},Wt=function(e){var t=e.selectedIdx,n=e.checkDupName,c=e.jobTaskRoles,o=e.setJobTaskRoles,s=Object(i.a)().t,l=c?c[t]:{},d=Object(r.useCallback)((function(e,n){o((function(c){var r=Object(Oe.a)(c);return r[t]=Object(a.a)(Object(a.a)({},r[t]),{},Object(U.a)({},e,n)),r}))}),[t]),u=function(e,t){d("containerSize",Object(a.a)(Object(a.a)({},l.containerSize),{},Object(U.a)({},e,t)))};return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:mt.a.formContent,style:{marginTop:"10px"},children:[Object(b.jsx)("div",{className:mt.a.paddingLeftRight10,children:Object(b.jsx)(yt,{errorMessage:n(),onChange:function(e,t){d("name",t)},title:s("taskRoleName"),value:l.name})}),Object(b.jsx)("div",{className:mt.a.paddingLeftRight10,children:Object(b.jsx)(Bt,{hint:s("toolTipsCommandSection"),onChange:function(e){d("commands",e)},title:s("command"),value:l.commands})}),Object(b.jsxs)("div",{className:mt.a.row,children:[Object(b.jsx)("div",{className:"".concat(mt.a.width25," ").concat(mt.a.paddingLeftRight10),children:Object(b.jsx)(wt,{min:1,onChange:function(e){return u("cpu",e)},title:s("CPU"),value:l.containerSize.cpu})}),Object(b.jsx)("div",{className:"".concat(mt.a.width25," ").concat(mt.a.paddingLeftRight10),children:Object(b.jsx)(wt,{min:0,onChange:function(e){return u("gpu",e)},title:s("GPU"),value:l.containerSize.gpu})}),Object(b.jsx)("div",{className:"".concat(mt.a.width25," ").concat(mt.a.paddingLeftRight10),children:Object(b.jsx)(wt,{min:512,onChange:function(e){return u("memoryMB",e)},title:"".concat(s("memory")," (MB)"),value:l.containerSize.memoryMB})}),Object(b.jsx)("div",{className:"".concat(mt.a.width25," ").concat(mt.a.paddingLeftRight10),children:Object(b.jsx)(wt,{errorMessage:l.shmMB>l.containerSize.memoryMB?s("shmCantGreaterThanMemory"):"",min:0,onChange:function(e){return d("shmMB",e)},title:s("sharedMemoryMB"),value:l.shmMB})})]}),Object(b.jsxs)("div",{className:mt.a.row,children:[Object(b.jsx)("div",{className:"".concat(mt.a.width25," ").concat(mt.a.paddingLeftRight10),children:Object(b.jsx)(wt,{min:1,onChange:function(e){return u("storageGB",e)},title:"".concat(s("disk")," (GB)"),value:l.containerSize.storageGB})}),Object(b.jsx)("div",{className:"".concat(mt.a.width75," ").concat(mt.a.paddingLeftRight10),children:Object(b.jsx)(It,{data:l.dockerInfo,onChange:d,selectedIdx:t})})]}),Object(b.jsx)("div",{className:mt.a.row,children:Object(b.jsx)("div",{className:"".concat(mt.a.width100),children:Object(b.jsx)(Ht,{data:l,onChange:d})})})]})})};var Kt=function(e){var t=e.jobTaskRoles,n=e.setJobTaskRoles,a=Object(i.a)().t,o=Object(r.useState)(t&&t[0].name),s=Object(c.a)(o,2),l=s[0],d=s[1],u=Object(r.useState)("0"),j=Object(c.a)(u,2),m=j[0],p=j[1];Object(r.useEffect)((function(){t&&t[Number(m)].name!==l&&d(t[Number(m)].name)}),[t]);var _=function(e,n){if(void 0===e||void 0===n)return null;var a=t&&t.find((function(t){return t.name===e.headerText})),c=Object(_t.validate)(a,ft).error;return Object(b.jsx)("div",{style:{position:"relative"},children:Object(b.jsxs)("div",{style:{padding:"0 10px",display:"flex",alignItems:"center",overflow:"auto"},children:[a.name!==l&&c&&Object(b.jsx)(T.a,{iconName:"Info",styles:{root:{position:"absolute",top:-10,left:7,fontSize:10,color:"red"}}}),Object(b.jsx)("span",{onClick:function(){d(e.headerText),p(e.itemKey)},children:n(e)}),t.length>1&&Object(b.jsx)(T.a,{iconName:"Cancel",onClick:function(t){h(t,e.headerText)}})]})})},O=t.length+1;function f(e,t){var n=function(e,t,n){for(var a=n,c="".concat(t,"_").concat(a++);e.find((function(e){return e===c}));)c="".concat(t,"_").concat(a++);return[c,a]}(e.map((function(e){return e.name})).filter((function(e,n){return n<t})),"Task_role",O),a=Object(c.a)(n,2),r=a[0],o=a[1];return O=o,r}var h=function(e,a){e.stopPropagation();var c=t.filter((function(e){return e.name!==a}));p("0"),d(c[0].name),n(c)};return Object(b.jsxs)("div",{className:mt.a.paddingBottom72,children:[Object(b.jsxs)("div",{className:mt.a.tabContainer,children:[Object(b.jsx)("div",{className:mt.a.tabContent,children:Object(b.jsx)(pt.a,{selectedKey:m,styles:{text:{fontSize:16,padding:"0 15px"},root:{background:"#FFF"},link:[{margin:0,padding:0,background:"#f8f8f8"}],linkIsSelected:{marginRight:8,paddingRight:8,paddingLeft:8,width:"auto",selectors:{":before":{transition:" left 0.267s cubic-bezier(0.1, 0.25, 0.75, 0.9) 0s, right 0.267s cubic-bezier(0.1, 0.25, 0.75, 0.9) 0s"},":hover:before":{left:0,right:0,transition:" left 0.267s cubic-bezier(0.1, 0.25, 0.75, 0.9) 0s, right 0.267s cubic-bezier(0.1, 0.25, 0.75, 0.9) 0s"}}}},children:t&&t.map((function(e,t){return Object(b.jsx)(nt.a,{headerText:e.name,itemKey:t,onRenderItemLink:_},t)}))})}),Object(b.jsx)("div",{className:mt.a.tabAdd,children:Object(b.jsx)(Qe.b,{iconProps:{iconName:"Add"},onClick:function(){for(var e=t.length,a=f(t,e);Object.keys(t).includes(a);)a=f(t,e+=1);var c=new be({name:a,commands:"sleep infinity"});n((function(e){return[].concat(Object(Oe.a)(e),[c])})),d(a),p(t.length)}})})]}),Object(b.jsx)(Wt,{checkDupName:function(){if(t){if(t.map((function(e){return e.name})).filter((function(e,t){return t!==Number(m)})).includes(l))return a("duplicateName");return/^[A-Za-z0-9\-._~]+$/.test(l)?void 0:"".concat(a("stringFormatIs")," ^[A-Za-z0-9\\-_~]+$")}},jobTaskRoles:t,selectedIdx:Number(m),setJobTaskRoles:n})]})},qt=n(812),Jt=n.n(qt),Zt=function(e){var t=e.vgState,n=e.data,a=e.alreadyUsedResource,o=e.jobTaskRoles,s=e.setJobTaskRoles,l=e.setActiveStep,d=e.resetDefault,u=e.dataId,j=e.step2State,m=e.currentUserName,p=Object(i.a)().t,_=Object(r.useState)(!1),O=Object(c.a)(_,2),f=O[0],h=O[1],v=Object(r.useState)(null),y=Object(c.a)(v,2)[1],k=function(e,t,n){var a=e.cpu+t.cpu,r=e.ram+t.memory,o=e.disk+t.storage,i=0,s=0;return a>n.cpu?(y(p("mustInputAvailableCpu")),!1):r>n.memory?(y(p("mustInputAvailableMemory")),!1):o>n.storageUsed?(y(p("mustInputAvailableStorage")),!1):(""!==Object.values(e.gpu)[1]?Object.entries(t.gpu).map((function(t){var a=Object(c.a)(t,2),r=a[0],o=a[1];Object.values(e.gpu)[1]===r&&(i=e.gpu.num+o,s=n.gpu[r])})):i=e.gpu.num,i>s?(y(p("isNotEnough",{name:p("GPU")})),!1):(y(null),!0))};return Object(r.useEffect)((function(){(function(e){return null===Object(_t.validate)(e,ht).error})(o)&&k(n,a,t)?h(!0):h(!1)}),[o]),Object(r.useEffect)((function(){j.isModify||j.templateInfo.owner===m&&k(n,a,t)&&l((function(e){return e+1}))}),[j]),Object(b.jsxs)("div",{className:Jt.a.container,children:[Object(b.jsxs)("div",{className:"".concat(Jt.a.header," ").concat(Jt.a.headerBorderBottom),children:[Object(b.jsxs)("div",{children:[p("virtualCluster"),p("enSpace"),p("status")," (",p("useAndAll"),")"]}),Object(b.jsxs)("div",{className:"".concat(Jt.a.vgStateContainer," ").concat(Jt.a.marginBottom10),children:[Object(b.jsxs)("div",{className:"".concat(Jt.a.width25," ").concat(n.cpu+a.cpu>t.cpu&&Jt.a.errorColor),children:[Object(b.jsx)("div",{children:p("CPU")}),Object(b.jsxs)("div",{children:[n.cpu+a.cpu," / ",t.cpu]})]}),Object(b.jsxs)("div",{className:"".concat(Jt.a.width25," ").concat(n.ram+a.memory>t.memory&&Jt.a.errorColor),children:[Object(b.jsxs)("div",{children:[p("memory"),"(MB)"]}),Object(b.jsxs)("div",{children:[n.ram+a.memory," / ",t.memory]})]}),Object(b.jsxs)("div",{className:"".concat(Jt.a.width25," ").concat(n.disk+a.storage>t.storage&&Jt.a.errorColor),children:[Object(b.jsxs)("div",{children:[p("disk"),"(GB)"]}),Object(b.jsxs)("div",{children:[n.disk+a.storage," / ",t.storage]})]}),""!==Object.values(n.gpu)[1]?Object.entries(a.gpu).map((function(e){var a=Object(c.a)(e,2),r=a[0],o=a[1];if(Object.values(n.gpu)[1]===r)return Object(b.jsxs)("div",{className:"".concat(Jt.a.width25," ").concat(n.gpu.num+o>t.gpu[r]&&Jt.a.errorColor),children:[Object(b.jsxs)("div",{children:[p("GPU")," ",r]}),Object(b.jsxs)("div",{children:[n.gpu.num+o," / ",t.gpu[r]]})]})})):Object(b.jsxs)("div",{className:"".concat(Jt.a.width25," ").concat(n.gpu.num>0&&Jt.a.errorColor),children:[Object(b.jsx)("div",{children:p("GPU")}),Object(b.jsx)("div",{children:p("no2")})]})]})]}),Object(b.jsx)(Kt,{jobTaskRoles:o,setJobTaskRoles:s}),Object(b.jsxs)("div",{className:"".concat(Jt.a.width100," ").concat(Jt.a.footer),children:[Object(b.jsx)(N,{onClick:function(){return d()},text:p("cancel")}),Object(b.jsxs)("div",{children:[Object(b.jsx)(x,{onClick:function(){return l((function(e){return u?e-2:e-1}))},text:p("Back")}),Object(b.jsx)(x,{className:Object(g.G)({marginLeft:"10px"}),disabled:!f,onClick:function(){l((function(e){return e+1}))},text:p("Next")})]})]})]})},Yt=function(e){var t=Object.assign({},e);return Object(b.jsx)(Et.a,Object(a.a)(Object(a.a)({},t),{},{onRenderColumnHeaderTooltip:function(e,t){return Object(b.jsx)("span",{style:{fontSize:"16px",fontWeight:"bold"},children:t(Object(a.a)({},e))})},styles:{root:{padding:"10px 0"}}}))},$t=function(e){var t=e.title,n=e.name,o=e.value,s=e.onChange,l=e.onError,d=e.keyName,u=e.keyField,j=e.keyOptions,m=e.valueName,p=e.valueField,_=e.secret,O=e.onValidateKey,f=e.onValidateValue,h=Object(i.a)().t,x=Object(r.useState)([]),g=Object(c.a)(x,2),v=g[0],y=g[1];Object(r.useMemo)((function(){var e=o.reduce((function(e,t){return void 0===e[t[p]]&&(e[t[p]]=0),e[t[p]]+=1,e}),{}),t=o.filter((function(t){return e[t[p]]>1})).map((function(e){return e[p]})),a="";if(t.length>0&&(a="".concat(n||"KeyValueList"," has duplicated values.")),o.some((function(e){return Object(A.isEmpty)(e[u])&&!Object(A.isEmpty)(e[p])}))&&(a="".concat(n||"KeyValueList"," has key with empty value.")),o.some((function(e){return Object(A.isEmpty)(e[p])&&!Object(A.isEmpty)(e[u])}))&&(a="".concat(n||"KeyValueList"," has value with empty key.")),!Object(A.isNil)(O)||!Object(A.isNil)(f)){var c,r=Object(Tt.a)(o);try{for(r.s();!(c=r.n()).done;){var i=c.value;if(!Object(A.isNil)(O)){var s=i[u],d=O(s);Object(A.isEmpty)(d)||(a=d)}if(!Object(A.isNil)(f)){var b=i[p],j=f(b);Object(A.isEmpty)(j)||(a=j)}}}catch(m){r.e(m)}finally{r.f()}}l&&l(a),y(t)}),[o]);var k=[{key:d,name:t,minWidth:320,onRender:function(e,t){var n=null;if(Object(A.isEmpty)(e[u])&&!Object(A.isEmpty)(e[p])&&(n="empty key"),!Object(A.isNil)(O)){var a=O(e[u]);Object(A.isEmpty)(a)||(n=a)}return Object(b.jsx)(ve.a,{errorMessage:n,onChange:function(e,n){return S(t,n.text)},options:j,styles:{root:{borderRadius:3}},text:e[u]})}},{key:m,name:m,minWidth:170,onRender:function(e,t){var n=null;if(v.includes(e[p])&&(n=h("sameMountPoint")),!Object(A.isNil)(f)){var a=f(e[p]);Object(A.isEmpty)(a)||(n=a)}return Object(b.jsx)(ge,{errorMessage:n,onChange:function(e,n){return C(t,n)},type:_&&"password",value:e[p]})}},{key:"remove",name:"".concat(h("delete")),minWidth:70,style:{padding:0},onRender:function(e,t){return Object(b.jsx)("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"center",height:"100%"},children:Object(b.jsx)(Qe.b,{iconProps:{iconName:"Delete"},onClick:function(){return N(t)}},"remove-button-".concat(t))})}}],w=Object(r.useCallback)((function(){var e;s([].concat(Object(Oe.a)(o),[(e={},Object(U.a)(e,u,""),Object(U.a)(e,p,""),e)]))}),[s,o,u,p]),N=Object(r.useCallback)((function(e){s([].concat(Object(Oe.a)(o.slice(0,e)),Object(Oe.a)(o.slice(e+1))))}),[s,o]),S=Object(r.useCallback)((function(e,t){var n;s([].concat(Object(Oe.a)(o.slice(0,e)),[(n={},Object(U.a)(n,u,t),Object(U.a)(n,p,"/root/".concat(t)),n)],Object(Oe.a)(o.slice(e+1))))}),[s,o,u]),C=Object(r.useCallback)((function(e,t){s([].concat(Object(Oe.a)(o.slice(0,e)),[Object(a.a)(Object(a.a)({},o[e]),{},Object(U.a)({},p,t))],Object(Oe.a)(o.slice(e+1))))}),[s,o,p]);return Object(b.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:Object(b.jsxs)("div",{children:[Object(b.jsx)(At.a,{checkboxVisibility:Pt.a.hidden,columns:k,compact:!0,items:o,layoutMode:Pt.e.fixedColumns,onRenderDetailsHeader:Yt,onRenderRow:function(e){return Object(b.jsx)(Dt.a,Object(a.a)({styles:{root:{fontSize:"14px",color:"#333",selectors:{"& .ms-ComboBox-container":{width:"100%",padding:"0 10px"},"& .ms-TextField":{width:"100%",padding:"0 10px"}}},cell:{display:"flex",alignItems:"center",padding:"10px 0"}}},e))},selectionMode:zt.b.none}),Object(b.jsx)("div",{style:{padding:"0 10px"},children:Object(b.jsx)(Qe.a,{iconProps:{iconName:"Add"},onClick:w,text:h("Add")})})]})})},Xt=function(e){var t=e.nfsInfo,n=e.glusterfsInfo,a=e.nfsMounts,c=e.setNfsMountsState,r=e.setGlusterfsMountsState,o=e.glusterfsMounts,s=Object(i.a)().t;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{children:[Object(b.jsx)($t,{hint:s("toolTipsNFS"),keyField:"name",keyName:s("name"),keyOptions:t.map((function(e){return{key:e.name,text:e.name}})),name:"NFS List",onChange:c,onError:function(){},title:s("NFS"),value:a,valueField:"mountPoint",valueName:s("mountPoint")}),Object(b.jsx)($t,{hint:s("toolTipsNFS"),keyField:"name",keyName:s("name"),keyOptions:n.map((function(e){return{key:e.name,text:e.name}})),name:"GlusterFS List",onChange:r,onError:function(){},title:s("glusterfs"),value:o,valueField:"mountPoint",valueName:s("volumeGlusterFS")})]})})},Qt=function(e){var t=Object.assign({},e);return Object(b.jsx)(Et.a,Object(a.a)(Object(a.a)({},t),{},{onRenderColumnHeaderTooltip:function(e,t){return Object(b.jsx)("span",{style:{fontSize:"16px",fontWeight:"bold"},children:t(Object(a.a)({},e))})},styles:{root:{padding:"10px 0"}}}))},en=function(e){var t=e.name,n=e.value,o=e.onChange,s=e.onError,l=e.keyName,d=e.keyField,u=e.valueName,j=e.valueField,m=e.secret,p=e.onValidateKey,_=e.onValidateValue;l=l||"Key",d=d||Object(A.camelCase)(l),u=u||"Value",j=j||Object(A.camelCase)(u);var O=Object(i.a)().t,f=Object(r.useState)([]),h=Object(c.a)(f,2),x=h[0],g=h[1];Object(r.useMemo)((function(){var e=n.reduce((function(e,t){return void 0===e[t[d]]&&(e[t[d]]=0),e[t[d]]+=1,e}),{}),a=n.filter((function(t){return e[t[d]]>1})).map((function(e){return e[d]})),c="";if(a.length>0&&(c="".concat(t||"KeyValueList"," has duplicated keys.")),n.some((function(e){return Object(A.isEmpty)(e[d])&&!Object(A.isEmpty)(e[j])}))&&(c="".concat(t||"KeyValueList"," has value with empty key.")),!Object(A.isNil)(p)||!Object(A.isNil)(_)){var r,o=Object(Tt.a)(n);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(!Object(A.isNil)(p)){var l=i[d],u=p(l);Object(A.isEmpty)(u)||(c=u)}if(!Object(A.isNil)(_)){var b=i[j],m=_(b);Object(A.isEmpty)(m)||(c=m)}}}catch(O){o.e(O)}finally{o.f()}}s&&s(c),g(a)}),[n]);var v=Object(r.useCallback)((function(){var e;o([].concat(Object(Oe.a)(n),[(e={},Object(U.a)(e,d,""),Object(U.a)(e,j,""),e)]))}),[o,n,d,j]),y=Object(r.useCallback)((function(e){o([].concat(Object(Oe.a)(n.slice(0,e)),Object(Oe.a)(n.slice(e+1))))}),[o,n]),k=Object(r.useCallback)((function(e,t){o([].concat(Object(Oe.a)(n.slice(0,e)),[Object(a.a)(Object(a.a)({},n[e]),{},Object(U.a)({},d,t))],Object(Oe.a)(n.slice(e+1))))}),[o,n,d]),w=Object(r.useCallback)((function(e,t){o([].concat(Object(Oe.a)(n.slice(0,e)),[Object(a.a)(Object(a.a)({},n[e]),{},Object(U.a)({},j,t))],Object(Oe.a)(n.slice(e+1))))}),[o,n,j]),N=Object(r.useCallback)((function(e,t){return t}),[]);Object(r.useLayoutEffect)((function(){re()}));var S=[{key:l,name:l,minWidth:320,onRender:function(e,t){var n=null;if(x.includes(e[d])&&(n=O("duplicateKeyword")),Object(A.isEmpty)(e[d])&&!Object(A.isEmpty)(e[j])&&(n=O("keywordCannotBeEmpty")),!Object(A.isNil)(p)){var a=p(e[d]);Object(A.isEmpty)(a)||(n=a)}return Object(b.jsx)(ge,{errorMessage:n,onChange:function(e,n){return k(t,n)},value:e[d]})}},{key:u,name:u,minWidth:170,onRender:function(e,t){var n=null;if(!Object(A.isNil)(_)){var a=_(e[j]);Object(A.isEmpty)(a)||(n=a)}return Object(b.jsx)(ge,{errorMessage:n,onChange:function(e,n){return w(t,n)},type:m&&"password",value:e[j]})}},{key:"remove",name:"".concat(O("delete")),minWidth:70,style:{padding:0},onRender:function(e,t){return Object(b.jsx)("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"center",height:"100%"},children:Object(b.jsx)(Qe.b,{iconProps:{iconName:"Delete"},onClick:function(){return y(t)}},"remove-button-".concat(t))})}}];return Object(b.jsxs)(M.a,{gap:"m",children:[Object(b.jsx)("div",{children:Object(b.jsx)(At.a,{checkboxVisibility:Pt.a.hidden,columns:S,compact:!0,getKey:N,items:n,layoutMode:Pt.e.fixedColumns,onRenderDetailsHeader:Qt,onRenderRow:function(e){return Object(b.jsx)(Dt.a,Object(a.a)({styles:{root:{fontSize:"14px",color:"#333",selectors:{"& .ms-TextField":{width:"100%",padding:"0 10px"},"& .ms-TextField-wrapper":{width:"100%"}}},cell:{display:"flex",alignItems:"center",padding:"6px 0"}}},e))},selectionMode:zt.b.none})}),Object(b.jsx)("div",{style:{padding:"0 10px"},children:Object(b.jsx)(Qe.a,{iconProps:{iconName:"Add"},onClick:v,children:O("Add")})})]})},tn=function(e){var t=e.parameters,n=e.setParameters,a=Object(i.a)().t;return Object(b.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:Object(b.jsx)(en,{keyField:"key",keyName:a("keyword"),name:"Parameter List",onChange:function(e){return n(e)},value:t,valueField:"value",valueName:a("Value")})})},nn=n(813),an=n.n(nn),cn=function(e){var t=e.nfsInfo,n=e.glusterfsInfo,a=e.nfsMounts,c=e.setNfsMountsState,r=e.setGlusterfsMountsState,o=e.glusterfsMounts,s=e.parameters,l=e.setParameters,d=e.resetDefault,u=e.setActiveStep,j=e.step2State,m=Object(i.a)().t;return Object(b.jsxs)("div",{className:"".concat(an.a.container," ").concat(an.a.paddingBottom72),children:[Object(b.jsx)(Xt,{glusterfsInfo:n,glusterfsMounts:o,nfsInfo:t,nfsMounts:a,setGlusterfsMountsState:r,setNfsMountsState:c}),Object(b.jsx)(tn,{parameters:s,setParameters:l}),Object(b.jsxs)("div",{className:"".concat(an.a.width100," ").concat(an.a.footer),children:[Object(b.jsx)(N,{onClick:function(){return d()},text:m("cancel")}),Object(b.jsxs)("div",{children:[Object(b.jsx)(x,{onClick:function(){j.isModify?u((function(e){return e-1})):u((function(e){return e-2}))},text:m("Back")}),Object(b.jsx)(x,{className:Object(g.G)({marginLeft:"10px"}),onClick:function(){return u((function(e){return e+1}))},text:m("Next")})]})]})]})},rn=n(425),on=n.n(rn),sn=n(814),ln=n.n(sn),dn=function(e){var t=e.data;return Object(b.jsxs)("div",{className:ln.a.container,children:[Object(b.jsx)("span",{}),Object(b.jsx)("span",{}),Object(b.jsx)("span",{}),Object(b.jsx)("span",{}),Object(b.jsxs)("div",{className:ln.a.content,children:[Object(b.jsx)("p",{children:"DISK"}),Object(b.jsxs)("p",{children:[Object(b.jsx)("b",{children:t}),"GB"]})]})]})},un=n(815),bn=n.n(un),jn=function(e){var t=e.data,n=void 0===t?{}:t;return Object(b.jsxs)("div",{className:bn.a.container,children:[Object(b.jsx)("span",{}),Object(b.jsx)("span",{}),Object(b.jsx)("span",{}),Object(b.jsx)("span",{}),Object(b.jsxs)("div",{className:bn.a.content,children:[Object(b.jsx)("p",{children:"GPU"}),Object(b.jsx)("p",{children:n.num?n.num:0}),Object(b.jsx)("sub",{children:n.type?n.type:""})]})]})},mn=n(816),pn=n.n(mn),_n=function(e){var t=e.data;return Object(b.jsxs)("div",{className:pn.a.container,children:[Object(b.jsx)("span",{className:pn.a.vertical}),Object(b.jsx)("span",{className:pn.a.vertical}),Object(b.jsx)("span",{className:pn.a.vertical}),Object(b.jsx)("span",{className:pn.a.vertical}),Object(b.jsx)("span",{className:pn.a.vertical}),Object(b.jsx)("span",{className:pn.a.vertical}),Object(b.jsx)("span",{className:pn.a.vertical}),Object(b.jsx)("span",{className:pn.a.vertical}),Object(b.jsx)("span",{className:pn.a.vertical}),Object(b.jsx)("span",{className:pn.a.vertical}),Object(b.jsx)("span",{className:pn.a.horizontal}),Object(b.jsx)("span",{className:pn.a.horizontal}),Object(b.jsx)("span",{className:pn.a.horizontal}),Object(b.jsx)("span",{className:pn.a.horizontal}),Object(b.jsx)("span",{className:pn.a.horizontal}),Object(b.jsx)("span",{className:pn.a.horizontal}),Object(b.jsx)("span",{className:pn.a.horizontal}),Object(b.jsx)("span",{className:pn.a.horizontal}),Object(b.jsx)("span",{className:pn.a.horizontal}),Object(b.jsx)("span",{className:pn.a.horizontal}),Object(b.jsx)("div",{className:pn.a.content,children:Object(b.jsxs)("div",{className:pn.a.cpu,children:[Object(b.jsx)("p",{children:"CPU"}),Object(b.jsxs)("p",{children:[Object(b.jsx)("b",{children:t}),"Cores"]})]})})]})},On=n(715),fn=n.n(On),hn=function(e){var t=e.data,n=void 0===t?0:t;return Object(b.jsxs)("div",{className:fn.a.container,children:[Object(b.jsx)("span",{}),Object(b.jsx)("span",{}),Object(b.jsx)("span",{}),Object(b.jsx)("span",{}),Object(b.jsxs)("div",{className:fn.a.content,children:[Object(b.jsx)("p",{children:"RAM"}),Object(b.jsxs)("p",{children:[Object(b.jsx)("b",{children:(n/je.b).toFixed(2)}),"GB"]})]})]})},xn=function(e){var t=e.data,n=void 0===t?0:t;return Object(b.jsxs)("div",{className:on()(fn.a.container,fn.a.shm),children:[Object(b.jsx)("span",{}),Object(b.jsx)("span",{}),Object(b.jsx)("span",{}),Object(b.jsxs)("div",{className:fn.a.content,children:[Object(b.jsx)("p",{children:"SHM"}),Object(b.jsxs)("p",{children:[Object(b.jsx)("b",{children:n}),"MB"]})]})]})},gn=n(817),vn=n.n(gn),yn=function(e){var t=e.data,n=void 0===t?{}:t;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(M.a.Item,{styles:{root:{width:600,display:"flex",justifyContent:"space-between"}},children:[Object(b.jsxs)("div",{className:vn.a.container1,children:[Object(b.jsx)("div",{className:vn.a.cell,children:Object(b.jsx)(dn,{data:n.disk})}),Object(b.jsx)("div",{className:on()(vn.a.cell,vn.a.small),children:Object(b.jsxs)("div",{className:vn.a.normal,style:{borderColor:"#B55108"},children:[Object(b.jsx)("p",{style:{color:"#B55108"},children:"NFS"}),Object(b.jsxs)("p",{children:[Object(b.jsx)("b",{children:n.nfs&&n.nfs.toFixed(2)}),"GB"]})]})}),Object(b.jsx)("div",{className:on()(vn.a.cell,vn.a.small),children:Object(b.jsxs)("div",{className:vn.a.normal,style:{borderColor:"#FF7C43"},children:[Object(b.jsx)("p",{style:{color:"#FF7C43"},children:"Gluster FS"}),Object(b.jsxs)("p",{children:[Object(b.jsx)("b",{children:n.glusterfs&&n.glusterfs.toFixed(2)}),"GB"]})]})}),Object(b.jsx)("div",{className:on()(vn.a.cell,vn.a.small),children:Object(b.jsxs)("div",{className:vn.a.normal,style:{borderColor:n.rdma?"#0793D1":"#A19F9D"},children:[Object(b.jsx)("p",{style:{color:n.rdma?"#0793D1":"#A19F9D"},children:"RDMA"}),Object(b.jsx)("i",{className:"fa fa-".concat(n.rdma?"check":"times"),style:{color:n.rdma?"#0793D1":"#A19F9D"}})]})}),Object(b.jsx)("div",{className:on()(vn.a.cell,vn.a.small),children:Object(b.jsx)(_n,{data:n.cpu})}),Object(b.jsx)("div",{className:on()(vn.a.cell,vn.a.gpu),children:Object(b.jsx)(jn,{data:n.gpu})})]}),Object(b.jsx)(hn,{data:n.ram}),Object(b.jsx)(xn,{data:n.shm})]})})},kn=function e(t){Object($.a)(this,e);var n=t.modify,c=t.step1State,r=t.jobTaskRoles,o=t.nfsMounts,i=t.glusterfsMounts,s=t.parameters,l=t.userInfo;this.name=c.name||"",this.users=void 0!==c.user?[c.user]:[l.username],this.startAt=D()(c.startAt).seconds(0).milliseconds(0).valueOf(),this.endAt=D()(c.endAt).seconds(0).milliseconds(0).valueOf(),this.cpu=r.reduce((function(e,t){return e+t.containerSize.cpu}),r.length),this.memory=r.reduce((function(e,t){return e+t.containerSize.memoryMB}),1024*r.length),this.storage=r.reduce((function(e,t){return e+t.containerSize.storageGB}),0),this.virtualGroup=n?null:c.virtualGroup,this.gpu=c.gpuType?Object(a.a)(Object(a.a)({},c.gpu),{},Object(U.a)({},c.gpuType,r.reduce((function(e,t){return e+t.containerSize.gpu}),0))):{},this.jobConfig={jobName:c.jobName,gpuType:c.gpuType,retryCount:c.retryCount,taskRoles:r.map((function(e){return{name:e.name,dockerImage:{uri:e.dockerInfo.uri},taskNumber:e.instances,cpuNumber:e.containerSize.cpu,memoryMB:e.containerSize.memoryMB,shmMB:e.shmMB,gpuNumber:e.containerSize.gpu,storageGB:e.containerSize.storageGB,minFailedTaskCount:e.completion.minFailedInstances,minSucceededTaskCount:e.completion.minSucceededInstances,command:e.commands.split(/\s*\n\s*/).map((function(e){return e.trim()})).filter((function(e){return e})).join(" && "),portList:e.ports&&e.ports.map((function(e){return{label:e.key,beginAt:e.value,portNumber:1}}))}})),jobEnvs:s&&s.reduce((function(e,t){return t.key?Object(a.a)(Object(a.a)({},e),{},Object(U.a)({},t.key,t.value)):e}),{}),extras:{nfsList:o.filter((function(e){return""!==e.name||""!==e.mountPoint})),glusterfsList:i.filter((function(e){return""!==e.name||""!==e.mountPoint})),virtualGroup:c.virtualGroup}}},wn=function(e){var t=e.data,n=e.resetDefault,a=e.setActiveStep,c=e.step1State,o=e.jobTaskRoles,s=e.nfsMounts,l=e.glusterfsMounts,d=e.parameters,u=e.dataId,j=Object(i.a)().t,m=Object(r.useContext)(_e).userInfo,p=function(){var e=Object(te.a)(ee.a.mark((function e(t){return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!u){e.next=6;break}return e.next=4,Object(F.Nb)(u,t);case 4:e.next=8;break;case 6:return e.next=8,Object(F.g)(t);case 8:z.b.success(j("success")),n(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0.data&&"startAt must >= now"===e.t0.data.message?z.b.error("".concat(j("time")).concat(j("enSpace")).concat(j("error"))):z.b.error(e.t0.data?e.t0.data.message:e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{style:{height:"480px",marginTop:"10px",marginBottom:"10px",padding:"0 20px 72px"},children:[Object(b.jsx)(yn,{data:t}),Object(b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",position:"absolute",bottom:"20px",left:0,padding:"0 20px",width:"100%"},children:[Object(b.jsx)(N,{onClick:function(){return n()},text:j("cancel")}),Object(b.jsxs)("div",{children:[Object(b.jsx)(N,{onClick:function(){return a((function(e){return e-1}))},text:j("Back")}),Object(b.jsx)(x,{className:Object(g.G)({marginLeft:"10px"}),onClick:function(){p(new kn({modify:!!u,step1State:c,jobTaskRoles:o,nfsMounts:s,glusterfsMounts:l,parameters:d,userInfo:m}))},text:j("submit")})]})]})]})};var Nn=function(e){var t=e.onClose,n=e.selectedVg,o=e.selectedVgHasGpu,s=e.createDate,l=e.getData,d=e.canUseVg,j=Object(i.a)().t,m=Object(r.useContext)(u.a).userInfo,p=m.username,_=Object(r.useState)([]),O=Object(c.a)(_,2),f=O[0],h=O[1],x=Object(r.useState)([]),g=Object(c.a)(x,2),v=g[0],y=g[1],k=Object(r.useState)({}),w=Object(c.a)(k,2),N=w[0],S=w[1],C=Object(r.useState)(0),M=Object(c.a)(C,2),R=M[0],B=M[1],I=Object(r.useState)(!0),E=Object(c.a)(I,2),P=E[0],D=E[1],z=Object(r.useState)({}),V=Object(c.a)(z,2),G=V[0],L=V[1],H=[j("schedule-step1Name"),j("schedule-step2Name"),j("schedule-step3Name"),j("schedule-step4Name"),j("schedule-step5Name")],W={name:"",virtualGroup:n,cpu:0,gpu:{},memory:0,storage:0,startAt:null,endAt:null,jobName:"".concat(m.username,"_").concat(Date.now()),retryCount:0,gpuType:""},K={selectedKey:null,isModify:!0,templateInfo:{}},q=Object(r.useState)(W),J=Object(c.a)(q,2),Z=J[0],$=J[1],X=Object(r.useState)(K),Q=Object(c.a)(X,2),ee=Q[0],te=Q[1],ne=Object(r.useState)([new be({name:"Task_role_1",commands:"sleep infinity"})]),ae=Object(c.a)(ne,2),ce=ae[0],re=ae[1],oe=Object(r.useState)([{name:"",mountPoint:""}]),ie=Object(c.a)(oe,2),se=ie[0],le=ie[1],de=Object(r.useState)([{name:"",mountPoint:""}]),ue=Object(c.a)(de,2),me=ue[0],Oe=ue[1],fe=Object(r.useState)([{key:"",value:""}]),he=Object(c.a)(fe,2),xe=he[0],ge=he[1];Object(r.useEffect)((function(){Object(A.isEmpty)(m)||Promise.all([Object(F.nb)(p),Object(F.pb)(p)]).then((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];h(n),y(a)}))}),[m]);var ve=function(){t(),$(W),te(K),l(n)},ye={userInfo:m,setErrorMessage:function(e,t){S((function(n){if(Object(A.isEmpty)(t)){if(void 0!==n&&void 0!==n[e]){var c=Object(a.a)({},n);return delete c[e],c}}else if(void 0!==n&&n[e]!==t)return Object(a.a)(Object(a.a)({},n),{},Object(U.a)({},e,t));return n}))},errorMessage:N,setErrorMessageState:S,activeStep:R};return Object(b.jsx)(_e.Provider,{value:ye,children:Object(b.jsxs)("div",{className:pe.a.form,children:[Object(b.jsxs)("div",{className:pe.a.title,children:[Object(b.jsxs)("div",{className:pe.a.title__left,children:[j("add"),j("enSpace"),j("schedule")]}),Object(b.jsx)("div",{className:pe.a.title__right,children:Object(b.jsx)("div",{className:pe.a.title__right__icon,children:Object(b.jsx)(T.a,{iconName:"Cancel",onClick:function(){ve()}})})})]}),Object(b.jsx)(Y,{activeStep:R,steps:H}),function(e){switch(e){case 0:return Object(b.jsx)($e,{createDate:s,defaultStep1:W,isPrvScheduledJob:P,resetDefault:ve,selectedVg:n,selectedVgHasGpu:o,selectedVgUsers:[],setActiveStep:B,setAlreadyUsedResource:L,setIsPreScheduledJob:D,setStep1State:$,step1State:Z});case 1:return Object(b.jsx)(bt,{resetDefault:ve,setActiveStep:B,setJobTaskRoles:re,setStep2State:te,step2State:ee});case 2:return Object(b.jsx)(Zt,{alreadyUsedResource:G,currentUserName:p,data:{cpu:ce.reduce((function(e,t){return e+t.containerSize.cpu}),0)+ce.length,disk:ce.reduce((function(e,t){return e+t.containerSize.storageGB}),0),ram:ce.reduce((function(e,t){return e+t.containerSize.memoryMB}),0)+1024*ce.length,gpu:{num:ce.reduce((function(e,t){return e+t.containerSize.gpu}),0),type:Z.gpuType}},jobTaskRoles:ce,resetDefault:ve,setActiveStep:B,setJobTaskRoles:re,step2State:ee,vgState:d.find((function(e){return e.name===n}))});case 3:return Object(b.jsx)(cn,{glusterfsInfo:v,glusterfsMounts:me,nfsInfo:f,nfsMounts:se,parameters:xe,resetDefault:ve,setActiveStep:B,setGlusterfsMountsState:Oe,setNfsMountsState:le,setParameters:ge,step2State:ee});default:return Object(b.jsx)(wn,{data:{disk:ce.reduce((function(e,t){return e+t.containerSize.storageGB}),0),cpu:ce.reduce((function(e,t){return e+t.containerSize.cpu}),0)+ce.length,gpu:{num:ce.reduce((function(e,t){return e+t.containerSize.gpu}),0),type:Object.keys(Z.gpu)[0]},rdma:!(!xe.find((function(e){return"paiAzRDMA"===e.key}))||"true"!==xe.find((function(e){return"paiAzRDMA"===e.key})).value),ram:ce.reduce((function(e,t){return e+t.containerSize.memoryMB}),0)+1024*ce.length,shm:ce.reduce((function(e,t){return e+t.shmMB}),0),nfs:se.reduce((function(e,t){var n=f.find((function(e){return e.name===t.name}));if(!n)return e;var a=n.used;return e+(n.size*je.a-a)/je.a}),0),glusterfs:me.reduce((function(e,t){return v.find((function(e){return e.name===t.name}))?e+v.find((function(e){return e.name===t.name})).available/1048576:e}),0)},glusterfsMounts:me,jobTaskRoles:ce,nfsMounts:se,parameters:xe,resetDefault:ve,setActiveStep:B,step1State:Z,vgState:d.find((function(e){return e.name===n}))})}}(R)]})})},Sn=n(976),Cn=n(818),Mn=n.n(Cn),Rn=function(e){var t=e.onClose,n=e.isOpen,o=e.selectedVg,s=e.selectedVgHasGpu,l=e.data,d=e.getData,j=e.canUseVg,m=Object(i.a)().t,p=Object(r.useContext)(u.a).userInfo,_=p.username,O=Object(r.useState)([]),f=Object(c.a)(O,2),h=f[0],x=f[1],g=Object(r.useState)([]),v=Object(c.a)(g,2),y=v[0],k=v[1],w=Object(r.useState)({}),N=Object(c.a)(w,2),S=N[0],C=N[1],M=Object(r.useState)(0),R=Object(c.a)(M,2),B=R[0],I=R[1],E=Object(r.useState)(!0),P=Object(c.a)(E,2),D=P[0],z=P[1],V=Object(r.useState)({}),G=Object(c.a)(V,2),L=G[0],H=G[1],W=[m("schedule-step1Name"),m("schedule-step2Name"),m("schedule-step3Name"),m("schedule-step4Name"),m("schedule-step5Name")],K={name:"",cpu:0,gpu:{},memory:0,storage:0,startAt:null,endAt:null,jobName:"".concat(p.username,"_").concat(Date.now()),retryCount:0,gpuType:"",taskRoles:1},q={selectedKey:null,isModify:!0,templateInfo:{}},J=Object(r.useState)(K),Z=Object(c.a)(J,2),$=Z[0],X=Z[1],Q=Object(r.useState)(q),ee=Object(c.a)(Q,2),te=ee[0],ne=ee[1],ae=Object(r.useState)([new be({name:"Task_role_1",commands:"sleep infinity"})]),ce=Object(c.a)(ae,2),re=ce[0],oe=ce[1],se=Object(r.useState)([]),le=Object(c.a)(se,2),de=le[0],ue=le[1],me=Object(r.useState)([]),pe=Object(c.a)(me,2),Oe=pe[0],fe=pe[1],he=Object(r.useState)([]),xe=Object(c.a)(he,2),ge=xe[0],ve=xe[1];Object(r.useEffect)((function(){Object(A.isEmpty)(p)||Promise.all([Object(F.nb)(_),Object(F.pb)(_)]).then((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];x(n),k(a)}))}),[p]),Object(r.useEffect)((function(){if(!Object(A.isEmpty)(l)){X((function(e){var t=l.name,n=l.cpu,c=l.memory,r=l.storage,i=l.gpu,s=l.startAt,d=l.endAt,u=l.jobConfig,b=l.users;return Object(a.a)(Object(a.a)({},e),{},{name:t,startAt:s,endAt:d,storage:r,gpu:i,users:b,cpu:n,memory:c,gpuType:Object(A.isEmpty)(l.gpu)?"":Object.keys(l.gpu)[0],virtualGroup:o,jobName:null!==u?u.jobName:"".concat(p.username,"_").concat(Date.now()),retryCount:null!==u?u.retryCount:0})}));var e=l.jobConfig;if(null!==e){var t=e.extras,n=e.taskRoles,c=n&&n.map&&n.map((function(e){var t=e.name,n=e.dockerImage,a=e.taskNumber,c=e.cpuNumber,r=e.shmMB,o=e.minFailedTaskCount,i=e.minSucceededTaskCount,s=e.command,l=e.portList,d=e.storageGB,u=e.memoryMB,b=e.gpuNumber;return new be({name:t,dockerInfo:new ie(n),instances:a,ports:l&&l.map((function(e){return{key:e.label,value:e.beginAt}})),commands:s,completion:new Xe({minFailedInstances:o,minSucceededInstances:i}),containerSize:{gpu:b,cpu:c,storageGB:d,memoryMB:u},shmMB:r})}));ue(t.nfsList),fe(t.glusterfsList),oe(c)}else z(!1)}}),[l]);var ye=function(){t(),X(K),ne(q),d(o)},ke={userInfo:p,setErrorMessage:function(e,t){C((function(n){if(Object(A.isEmpty)(t)){if(void 0!==n&&void 0!==n[e]){var c=Object(a.a)({},n);return delete c[e],c}}else if(void 0!==n&&n[e]!==t)return Object(a.a)(Object(a.a)({},n),{},Object(U.a)({},e,t));return n}))},errorMessage:S,setErrorMessageState:C,activeStep:B};return Object(b.jsx)(_e.Provider,{value:ke,children:Object(b.jsx)("div",{className:Mn.a.form,children:Object(b.jsxs)(Sn.a,{isOpen:n,styles:{main:{height:window.innerHeight>=750?750:window.innerHeight,width:window.innerWidth>=700?700:window.innerWidth,padding:"20px",overflow:"hidden"},scrollableContent:{maxHeight:"",height:"100%"},layer:{zIndex:1030}},children:[Object(b.jsxs)("div",{className:Mn.a.title,children:[Object(b.jsxs)("div",{className:Mn.a.name,children:[m("modify"),m("enSpace"),m("schedule")]}),Object(b.jsx)("div",{className:Mn.a.icons,children:Object(b.jsx)(T.a,{iconName:"Cancel",onClick:function(){ye()},styles:{root:{cursor:"pointer"}}})})]}),Object(b.jsx)(Y,{activeStep:B,steps:W}),function(e){switch(e){case 0:return Object(b.jsx)($e,{createDate:null,dataId:l.id,defaultStep1:K,isPrvScheduledJob:D,resetDefault:ye,selectedVg:o,selectedVgHasGpu:s,selectedVgUsers:[],setActiveStep:I,setAlreadyUsedResource:H,setIsPreScheduledJob:z,setStep1State:X,step1State:$});case 1:return Object(b.jsx)(bt,{resetDefault:ye,setActiveStep:I,setJobTaskRoles:oe,setStep2State:ne,step2State:te});case 2:return Object(b.jsx)(Zt,{alreadyUsedResource:L,currentUserName:_,data:{cpu:re.reduce((function(e,t){return e+t.containerSize.cpu}),0)+re.length,disk:re.reduce((function(e,t){return e+t.containerSize.storageGB}),0),ram:re.reduce((function(e,t){return e+t.containerSize.memoryMB}),0)+1024*re.length,gpu:{num:re.reduce((function(e,t){return e+t.containerSize.gpu}),0),type:$.gpuType}},dataId:l.id,jobTaskRoles:re,resetDefault:ye,setActiveStep:I,setJobTaskRoles:oe,step2State:te,vgState:j.find((function(e){return e.name===o}))});case 3:return Object(b.jsx)(cn,{glusterfsInfo:y,glusterfsMounts:Oe,nfsInfo:h,nfsMounts:de,parameters:ge,resetDefault:ye,setActiveStep:I,setGlusterfsMountsState:fe,setNfsMountsState:ue,setParameters:ve,step2State:te});default:return Object(b.jsx)(wn,{data:{disk:re.reduce((function(e,t){return e+t.containerSize.storageGB}),0),cpu:re.reduce((function(e,t){return e+t.containerSize.cpu}),0)+re.length,gpu:{num:re.reduce((function(e,t){return e+t.containerSize.gpu}),0),type:Object.keys($.gpu)[0]},rdma:!(!ge.find((function(e){return"paiAzRDMA"===e.key}))||"true"!==ge.find((function(e){return"paiAzRDMA"===e.key})).value),ram:re.reduce((function(e,t){return e+t.containerSize.memoryMB}),0)+1024*re.length,shm:re.reduce((function(e,t){return e+t.shmMB}),0),nfs:de.reduce((function(e,t){var n=h.find((function(e){return e.name===t.name}));if(!n)return e;var a=n.used;return e+(n.size*je.a-a)/je.a}),0),glusterfs:Oe.reduce((function(e,t){return y.find((function(e){return e.name===t.name}))?e+y.find((function(e){return e.name===t.name})).available/1048576:e}),0)},dataId:l.id,glusterfsMounts:Oe,jobTaskRoles:re,nfsMounts:de,parameters:ge,resetDefault:ye,setActiveStep:I,step1State:$})}}(B)]})})})},Bn=n(819),In=n.n(Bn),Tn=[{name:"total",cpu:4,memory:7168,gpu:{"P106-100":1},storage:111,users:["jacktest","isaac","notAdmin","harbor","adminasdasdjkl"],resource:null,schedulable:!1},{name:"test",cpu:2,memory:2048,gpu:{},storage:5,users:["ff","normal","haha","trytryy","fortestonly","maybe","nicktest","what1","jacktest","odin2","gygy","white","qqqq","jk002","onetest","testtest","qwerqwer","elvis","wfhwfh001","lsls","elvistest"],resource:"system",schedulable:!0},{name:"aaaaa",cpu:1,memory:3e3,gpu:{"P106-100":1},storage:20,users:["felix","user01","elvis"],resource:"\u5be6\u9a57\u5ba41",schedulable:!1}];t.default=function(){var e=Object(r.useContext)(u.a).userInfo,t=Object(i.a)().t,n=Object(r.useState)([]),o=Object(c.a)(n,2),s=o[0],l=o[1],d=Object(r.useState)(),j=Object(c.a)(d,2),_=j[0],O=j[1],f=Object(r.useState)(!1),h=Object(c.a)(f,2),v=h[0],y=h[1],k=Object(r.useState)(0),w=Object(c.a)(k,2),S=w[0],C=w[1],E=Object(r.useState)([]),P=Object(c.a)(E,2),V=P[0],G=P[1],U=Object(r.useState)({dayEl:null,el:null}),H=Object(c.a)(U,2),W=H[0],K=H[1],q=Object(r.useState)(),J=Object(c.a)(q,2),Z=J[0],Y=J[1],$=Object(r.useState)({}),X=Object(c.a)($,2),Q=X[0],ee=X[1],te=Object(r.useState)(!1),ne=Object(c.a)(te,2),ae=ne[0],ce=ne[1],re=Object(r.useState)(),oe=Object(c.a)(re,2),ie=oe[0],se=oe[1],le=Object(r.useState)([]),de=Object(c.a)(le,2),ue=de[0],be=de[1],je=Object(r.useState)(!1),me=Object(c.a)(je,2),pe=me[0],_e=me[1],Oe=Object(r.useState)(!1),fe=Object(c.a)(Oe,2),he=fe[0],xe=fe[1],ge=function(e){return e.map((function(e,t){return Object(a.a)({key:t,text:e.name,data:e.data},e)}))},ve=function(t){xe(!0),Object(F.W)({virtualGroup:t}).then((function(t){G(t.filter((function(t){return t.users.some((function(t){return t===e.username}))})).map((function(e){return Object(a.a)(Object(a.a)({},e),{},{start:e.startAt,end:e.endAt,color:function(e){switch(e){default:return"#008756";case 0:return"#FFA500";case-1:return"#DD4B39"}}(e.state)})}))),xe(!1)})).catch((function(e){z.b.error(e.data.message),xe(!1)}))};return Object(r.useEffect)((function(){Object(A.isEmpty)(e)||function(){var t=Tn.filter((function(e){return!1!==e.schedulable}));l(t),Object(A.isEmpty)(t)||(ve(t[0].name),O(t[0].name),Object(A.isEmpty)(t[0].gpu)||y(!0)),Object(F.E)(e.username).then((function(e){var t=e.filter((function(e){return!1!==e.schedulable}));l(t),Object(A.isEmpty)(t)||(ve(t[0].name),O(t[0].name),Object(A.isEmpty)(t[0].gpu)||y(!0))}))}()}),[e]),Object(r.useEffect)((function(){be((function(){switch(ie){default:return V;case"accept":return V.filter((function(e){return 1===e.state}));case"pending":return V.filter((function(e){return 0===e.state}));case"deny":return V.filter((function(e){return-1===e.state}))}}))}),[V,ie]),Object(b.jsxs)(M.a,{styles:{root:{padding:"0 20px 20px",height:"100%"}},children:[Object(b.jsx)(p.a,{}),Object(b.jsx)(M.a,{children:Object(b.jsxs)("div",{className:In.a.searchBlock,children:[Object(b.jsxs)("div",{className:In.a.searchBlock__left,children:[Object(b.jsx)(N,{className:Object(g.G)({marginRight:10}),disabled:he,iconProps:{iconName:"Refresh"},onClick:function(){Object(A.isEmpty)(_)||ve(_)},text:t("refresh")}),Object(b.jsx)(R.a,{className:Object(g.G)({marginRight:10}),disabled:he,onChange:function(e,t){C(t.key),O(t.text),Object(A.isEmpty)(t.gpu)?y(!1):y(!0)},options:ge(s),placeholder:"".concat(t("select")).concat(t("group")),selectedKey:S,styles:{title:{borderRadius:3}}}),Object(b.jsx)(x,{disabled:he,iconProps:{iconName:"Search"},onClick:function(){return ve(_)},styles:{root:{height:"32px",border:"1px solid transparent",boxSizing:"border-box",borderRadius:"3px",selectors:{"& div > div":{flexShrink:"0"}}}},text:t("search")})]}),Object(b.jsx)("div",{children:Object(b.jsx)(R.a,{onChange:function(e,t){return se(t.key)},onRenderCaretDown:function(){return Object(b.jsx)(T.a,{iconName:"SwitcherStartEnd"})},onRenderOption:function(e){return Object(b.jsxs)("div",{style:{display:"flex",alignItems:"center",color:(t=e.key,["blue","green","orange","red"][["all","accept","pending","deny"].indexOf(t)])},children:[e.data&&e.data.icon&&Object(b.jsx)(T.a,{"aria-hidden":"true",iconName:e.data.icon,style:{marginRight:"8px",fontSize:14},title:e.data.icon}),Object(b.jsx)("span",{children:e.text})]});var t},options:ge([{name:t("allShow"),data:{icon:"6PointStar"},key:"all"},{name:t("verified"),data:{icon:"Accept"},key:"accept"},{name:t("verifying"),data:{icon:"HourGlass"},key:"pending"},{name:t("denied"),data:{icon:"Cancel"},key:"deny"}]),placeholder:"".concat(t("select")).concat(t("enSpace")).concat(t("status")),styles:{root:{minWidth:150,width:150,fontSize:14,marginRight:"8px"},title:{borderRadius:"3px"}}})})]})}),Object(b.jsx)(B.a,{grow:!0,styles:{root:{padding:"20px",background:"#FBFBFB",overflow:"auto"}},children:Object(b.jsx)(m,{dateClick:function(e){if(Object(A.isEmpty)(_))z.b.error(t("pleaseSelectVg"));else{var n=new Date(e.date).toDateString()===(new Date).toDateString(),a=new Date(e.date).getTime()>=(new Date).getTime();if(n)return Y(D()(new Date).seconds(0).add(5,"m").toDate()),ce(!0),void K((function(){return{dayEl:e.dayEl,el:null}}));a?(Y(new Date(e.date)),ce(!0),K((function(){return{dayEl:e.dayEl,el:null}}))):z.b.error(t("PleaseSelectTheCorrectScheduleDate"))}},dayCellClassNames:function(e){if(D()(e.date).valueOf()<D()().subtract(1,"days").valueOf())return"pastBackground"},dayMaxEventRows:4,eventClick:function(e){var t=e.jsEvent.path.some((function(e){return e.getAttribute&&"fc-popover-body "===e.getAttribute("class")})),n=t?e.jsEvent:e.el,c=Number(e.event._def.publicId);ce(!0),K((function(){return{el:n,dayEl:null}})),ee(Object(a.a)(Object(a.a)({},e.event._def.extendedProps),{},{id:c}))},eventContent:function(e){var t=ue.find((function(t){return String(t.id)===e.event.id}));return Object(b.jsxs)(Ue.a,{directionalHint:He.a.leftCenter,styles:{root:{width:"100%",display:"flex",alignItems:"center",cursor:"pointer"}},tooltipProps:{onRenderContent:function(){return Object(b.jsx)("div",{children:Object(b.jsxs)("p",{children:[D()(t.startAt).format("MM/DD HH:mm")," - ",D()(t.endAt).format("MM/DD HH:mm")]})})}},children:[Object(b.jsx)("div",{className:"fc-event-time",children:e.timeText}),Object(b.jsx)("div",{className:"fc-event-title",children:t.name})]})},eventDisplay:"block",events:ue})}),ae&&Object(b.jsxs)(I.a,{directionalHintForRtl:He.a.topLeftEdge,gapSpace:0,isBeakVisible:!0,layerProps:{styles:{root:{zIndex:1030}}},styles:W.el?{calloutMain:{width:"auto",height:"auto",overflow:"hidden"}}:{calloutMain:{height:window.innerHeight>=750?750:window.innerHeight,width:window.innerWidth>=700?700:window.innerWidth,overflow:"hidden"}},target:W.el||W.dayEl,children:[W.el&&Object(b.jsx)(L,{data:Q,getData:ve,onClose:function(){ce(!1)},onOpenModifyModal:function(){return _e(!0)},selectedVg:_}),W.dayEl&&Object(b.jsx)(Nn,{canUseVg:s,createDate:Z,getData:ve,isOpen:ae,onClose:function(){ce(!1)},pickDate:Z,selectedVg:_,selectedVgHasGpu:v})]}),pe&&Object(b.jsx)(Rn,{canUseVg:s,data:Q,getData:ve,isOpen:pe,modify:!0,onClose:function(){return _e(!1)},selectedVg:_,selectedVgHasGpu:v})]})}}}]);
//# sourceMappingURL=Schedule.56668da8.chunk.js.map